# Sprint 37: Восстановление функционала и улучшение UX (2025-11-26 - 2025-12-10)

## Цели спринта

- **Восстановить критический функционал:** Устранить наиболее серьезные расхождения между реализованной логикой и доступным UI, выявленные в ходе аудита.
- **Улучшить пользовательский опыт (UX):** Предоставить пользователям ключевую информацию (например, баланс) и работающие элементы управления.
- **Заложить основу для будущих улучшений:** Начать работу над восстановлением полного функционала, чтобы привести приложение в соответствие с его потенциалом.
- **Актуализировать документацию:** Поддерживать всю проектную документацию в актуальном состоянии.

## Задачи

### 1. P1: Критические исправления

-   **1.1: Отобразить баланс кредитов Suno**
    -   [ ] **Задача:** Реализовать отображение оставшихся у пользователя кредитов Suno.
    -   **Действия:**
        -   [ ] Создать хук `useBalance.ts` для асинхронного получения данных о балансе через `suno.adapter.ts`.
        -   [ ] Создать UI-компонент `UserBalance.tsx` для стилизованного отображения баланса.
        -   [ ] Интегрировать `UserBalance.tsx` в `Header.tsx` или другое видное место в `WorkspaceLayout`.
        -   [ ] Добавить обработку состояний загрузки и ошибок.
    -   **Статус:** `К выполнению`

-   **1.2: Сделать "Оптимизированный" вид в Библиотеке интерактивным**
    -   [ ] **Задача:** Обеспечить базовую интерактивность для "оптимизированного" режима просмотра треков.
    -   **Действия:**
        -   [ ] Передать в компонент `OptimizedTrackList` как минимум обработчик `onPlay`.
        -   [ ] **TODO:** В будущем рассмотреть полную реализацию всех действий или удалить этот вид, если он не нужен.
    -   **Статус:** `К выполнению`

### 2. P2: Восстановление основного функционала

-   **2.1: Восстановить действия в виртуализированной сетке Библиотеки**
    -   [ ] **Задача:** Обеспечить доступность всех действий с треками для пользователей с большими библиотеками.
    -   **Действия:**
        -   [ ] Передать недостающие обработчики (`onUpscaleAudio`, `onGenerateCover` и т.д.) в компонент `VirtualizedTrackGrid`.
    -   **Статус:** `К выполнению`

-   **2.2: Реализовать UI для функции "Использовать стем как референс"**
    -   [ ] **Задача:** Добавить в "Stem Studio" возможность использовать стем для создания нового трека.
    -   **Действия:**
        -   [ ] Добавить кнопку/пункт меню "Use as Reference" в `StemTrackList` или `StudioControls`.
        -   [ ] Реализовать логику, которая при нажатии сохраняет URL стема в `localStorage` и перенаправляет на страницу `Generate`.
        -   [ ] Доработать `MusicGeneratorContainer` для автоматического подхвата этого URL.
    -   **Статус:** `К выполнению`

### 3. Документация и управление

-   [ ] Создать этот план спринта.
-   [ ] Обновить `SPRINT_STATUS.md`.
-   [ ] **TODO:** Обновить `backlog.md` по завершении спринта.

## Результаты (Ожидаемые)
- Пользователи смогут видеть свой баланс кредитов.
- Все режимы просмотра в Библиотеке будут интерактивны.
- Ключевой функционал "Stem Studio" будет реализован в UI.
- Проект станет более целостным и соответствующим ожиданиям пользователей.
