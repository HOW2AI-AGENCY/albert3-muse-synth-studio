# üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—é –º–∏–≥—Ä–∞—Ü–∏–π Supabase

## üîç –ê–Ω–∞–ª–∏–∑ —Ç–µ–∫—É—â–∏—Ö –º–∏–≥—Ä–∞—Ü–∏–π

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
–í –ø—Ä–æ–µ–∫—Ç–µ Albert3 Muse Synth Studio –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–≤–∞ –ø–æ–¥—Ö–æ–¥–∞ –∫ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—é –º–∏–≥—Ä–∞—Ü–∏–π:

1. **–û–ø–∏—Å–∞—Ç–µ–ª—å–Ω–æ–µ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ** (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π –ø–æ–¥—Ö–æ–¥):
   - `20250115000000_create_rate_limits_table.sql` ‚úÖ

2. **UUID-–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ** (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ–º–æ–µ):
   - `20251002062819_07e3f057-55bf-4566-b5eb-fbb819d62fbd.sql` ‚ùå
   - `20251002083932_1aecbc4b-1ffd-47d9-8c48-50a12e1de58b.sql` ‚ùå
   - –ò –¥—Ä—É–≥–∏–µ...

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è

### 1. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –º–∏–≥—Ä–∞—Ü–∏–π

```
YYYYMMDDHHMMSS_action_entity_description.sql
```

**–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- `YYYYMMDDHHMMSS` - –≤—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
- `action` - –¥–µ–π—Å—Ç–≤–∏–µ (create, alter, drop, add, remove, update)
- `entity` - —Å—É—â–Ω–æ—Å—Ç—å (table, column, index, policy, function)
- `description` - –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ

### 2. –ü—Ä–∏–º–µ—Ä—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è

#### –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü
```sql
20250115120000_create_table_tracks.sql
20250115120100_create_table_profiles.sql
20250115120200_create_table_rate_limits.sql
```

#### –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
```sql
20250115130000_alter_table_tracks_add_suno_fields.sql
20250115130100_alter_table_tracks_add_provider_column.sql
20250115130200_alter_table_tracks_add_style_tags.sql
```

#### –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
```sql
20250115140000_create_index_tracks_user_status.sql
20250115140100_create_index_tracks_suno_id.sql
20250115140200_create_index_tracks_style_tags_gin.sql
```

#### –ü–æ–ª–∏—Ç–∏–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
```sql
20250115150000_create_policy_tracks_user_access.sql
20250115150100_create_policy_profiles_own_data.sql
```

### 3. –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ç–µ–∫—É—â–∏—Ö –º–∏–≥—Ä–∞—Ü–∏–π –Ω–æ–≤—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º

| –¢–µ–∫—É—â–µ–µ –∏–º—è | –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ –∏–º—è | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------------|-------------------|----------|
| `20251002062819_07e3f057...sql` | `20251002062819_create_table_tracks.sql` | –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã —Ç—Ä–µ–∫–æ–≤ |
| `20251002083932_1aecbc4b...sql` | `20251002083932_alter_table_tracks_add_extended_fields.sql` | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª–µ–π provider, lyrics, style_tags |
| `20251002121554_768bd3b2...sql` | `20251002121554_create_table_profiles.sql` | –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–æ—Ñ–∏–ª–µ–π |
| `20251002135105_cfb1cac5...sql` | `20251002135105_alter_table_tracks_add_suno_metadata.sql` | –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö Suno |
| `20251002141006_9aef8750...sql` | `20251002141006_create_indexes_tracks_performance.sql` | –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ |

## üõ†Ô∏è –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

### 1. –î–ª—è –Ω–æ–≤—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π

–ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤—ã—Ö –º–∏–≥—Ä–∞—Ü–∏–π –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∫–æ–º–∞–Ω–¥—É —Å –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–º –∏–º–µ–Ω–µ–º:

```bash
# –í–º–µ—Å—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
supabase migration new "create_table_user_preferences"

# –ò–ª–∏
supabase migration new "alter_table_tracks_add_ai_model_version"
```

### 2. –ì—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∞ —Å–≤—è–∑–∞–Ω–Ω—ã—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

–û–±—ä–µ–¥–∏–Ω—è–π—Ç–µ –ª–æ–≥–∏—á–µ—Å–∫–∏ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–¥–Ω—É –º–∏–≥—Ä–∞—Ü–∏—é:

```sql
-- 20250115160000_setup_audio_processing_system.sql
-- –°–æ–∑–¥–∞–Ω–∏–µ –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞—É–¥–∏–æ

-- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –¥–ª—è –∞—É–¥–∏–æ-–∑–∞–¥–∞—á
CREATE TABLE audio_processing_jobs (...);

-- –°–æ–∑–¥–∞–Ω–∏–µ –∏–Ω–¥–µ–∫—Å–æ–≤
CREATE INDEX idx_audio_jobs_status ON audio_processing_jobs(status);

-- –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª–∏—Ç–∏–∫ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
CREATE POLICY audio_jobs_user_access ON audio_processing_jobs ...;
```

### 3. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –≤ –º–∏–≥—Ä–∞—Ü–∏—è—Ö

–í—Å–µ–≥–¥–∞ –¥–æ–±–∞–≤–ª—è–π—Ç–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –¥–ª—è –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è:

```sql
-- –ú–∏–≥—Ä–∞—Ü–∏—è: 20250115170000_create_table_user_analytics
-- –û–ø–∏—Å–∞–Ω–∏–µ: –°–æ–∑–¥–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

-- –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
CREATE TABLE user_analytics (
    id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
    user_id UUID NOT NULL REFERENCES auth.users(id),
    event_type TEXT NOT NULL, -- 'track_created', 'track_played', 'track_liked'
    event_data JSONB DEFAULT '{}'::jsonb,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT NOW()
);
```

## üìä –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è

### 1. –ß–∏—Ç–∞–µ–º–æ—Å—Ç—å
- –°—Ä–∞–∑—É –ø–æ–Ω—è—Ç–Ω–æ, —á—Ç–æ –¥–µ–ª–∞–µ—Ç –º–∏–≥—Ä–∞—Ü–∏—è
- –õ–µ–≥–∫–æ –Ω–∞–π—Ç–∏ –Ω—É–∂–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é –≤ —Å–ø–∏—Å–∫–µ
- –£–ø—Ä–æ—â–∞–µ—Ç –∫–æ–¥-—Ä–µ–≤—å—é

### 2. –°–æ–ø—Ä–æ–≤–æ–∂–¥–µ–Ω–∏–µ
- –ë—ã—Å—Ç—Ä–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–π
- –õ–µ–≥—á–µ –æ—Ç–∫–∞—Ç—ã–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
- –ü—Ä–æ—â–µ –æ—Ç–ª–∞–∂–∏–≤–∞—Ç—å –ø—Ä–æ–±–ª–µ–º—ã

### 3. –ö–æ–º–∞–Ω–¥–Ω–∞—è —Ä–∞–±–æ—Ç–∞
- –ï–¥–∏–Ω—ã–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç –¥–ª—è –≤—Å–µ–π –∫–æ–º–∞–Ω–¥—ã
- –ú–µ–Ω—å—à–µ –ø—É—Ç–∞–Ω–∏—Ü—ã –ø—Ä–∏ —Å–ª–∏—è–Ω–∏–∏ –≤–µ—Ç–æ–∫
- –õ—É—á—à–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

## üîÑ –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏ –∫ –Ω–æ–≤—ã–º —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∞–º

### –≠—Ç–∞–ø 1: –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö –º–∏–≥—Ä–∞—Ü–∏–π
- [x] –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –∏–º–µ–Ω
- [x] –î–æ–±–∞–≤–∏—Ç—å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –º–∏–≥—Ä–∞—Ü–∏—è–º

### –≠—Ç–∞–ø 2: –ù–æ–≤—ã–µ –º–∏–≥—Ä–∞—Ü–∏–∏
- [ ] –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω—ã–µ –∏–º–µ–Ω–∞
- [ ] –°–ª–µ–¥–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è
- [ ] –î–æ–±–∞–≤–ª—è—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏

### –≠—Ç–∞–ø 3: –û–±—É—á–µ–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã
- [ ] –ü—Ä–æ–≤–µ—Å—Ç–∏ –æ–∑–Ω–∞–∫–æ–º–ª–µ–Ω–∏–µ —Å –≥–∞–π–¥–ª–∞–π–Ω–∞–º–∏
- [ ] –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ CI/CD
- [ ] –°–æ–∑–¥–∞—Ç—å —à–∞–±–ª–æ–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–π

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Supabase –ø–æ –º–∏–≥—Ä–∞—Ü–∏—è–º](https://supabase.com/docs/guides/cli/local-development#database-migrations)
- [–õ—É—á—à–∏–µ –ø—Ä–∞–∫—Ç–∏–∫–∏ –∏–º–µ–Ω–æ–≤–∞–Ω–∏—è –≤ SQL](https://www.sqlstyle.guide/)
- [–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ö–µ–º–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö](https://martinfowler.com/articles/evodb.html)

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** –Ø–Ω–≤–∞—Ä—å 2025  
**–í–µ—Ä—Å–∏—è:** 1.0  
**–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç–∏–≤–Ω—ã–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏