# üîç Suno API Integration Audit ‚Äî October 2025

**–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞:** 8 –æ–∫—Ç—è–±—Ä—è 2025
**–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã:** 2.6.0
**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –ü–æ–ª–Ω–∞—è —Ä–µ–≤–∏–∑–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å [sunoapi.org](https://api.sunoapi.org) –∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º–∏ Suno endpoints –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º—É–∑—ã–∫–∏, –ø–æ—Å—Ç-–ø–æ–ª–ª–∏–Ω–≥–∞ –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Å—Ç–µ–º–æ–≤. –¶–µ–ª—å ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π, —É—Å–∏–ª–∏—Ç—å –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∏ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å.

---

## 1. –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

| –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–ª–∏ | –†–µ–∑—É–ª—å—Ç–∞—Ç | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
| ------------- | --------- | ---------- |
| `https://api.sunoapi.org/` (HTTP headers) | ‚úÖ 200 ‚Üí 404 JSON body | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å reverse-proxy, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (—Å–º. –ª–æ–≥–∏ –≤ –æ—Ç—á—ë—Ç–µ `curl -I`). |
| `https://api.sunoapi.org/api/v1/docs` / `swagger-ui/index.html` | ‚ö†Ô∏è 404 | –û—Ç–∫—Ä—ã—Ç—ã–π Swagger –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω; API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–∞–∫—Ä—ã—Ç—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é. |
| –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π edge-—Ñ—É–Ω–∫—Ü–∏–π `supabase/functions` | ‚úÖ | –§–∞–∫—Ç–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –æ—Å–Ω–æ–≤–∞–Ω–∞ –Ω–∞ REST-–≤—ã–∑–æ–≤–∞—Ö Suno; –∞—É–¥–∏—Ç –∏—Å—Ö–æ–¥–Ω–∏–∫–æ–≤ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤. |
| –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –æ—Ç—á—ë—Ç—ã (`project-management/reports/*`) | ‚úÖ | –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω—ã –ø—Ä–µ–¥—ã–¥—É—â–∏–µ –∑–∞–º–µ—á–∞–Ω–∏—è –ø–æ Suno; –∞—É–¥–∏—Ç —Ä–∞—Å—à–∏—Ä—è–µ—Ç –∏—Ö –≤ —Ä–∞–∑–¥–µ–ª–∞—Ö –Ω–∏–∂–µ. |

> **–í—ã–≤–æ–¥:** –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è `sunoapi.org` –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –ø—É–±–ª–∏—á–Ω–æ, –ø–æ—ç—Ç–æ–º—É –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ —á–µ—Ä–µ–∑ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ API –∏ –æ–±—Ä–∞—Ç–Ω—É—é –∏–Ω–∂–µ–Ω–µ—Ä–∏—é –æ—Ç–≤–µ—Ç–æ–≤.

---

## 2. –¢–æ—á–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –ø–æ–∫—Ä—ã—Ç–∏—è

### 2.1 –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç—Ä–µ–∫–æ–≤ (Edge Function `generate-suno`)
- **–û—Å–Ω–æ–≤–Ω–æ–π endpoint:** `https://api.sunoapi.org/api/v1/generate` —Å fallback –Ω–∞ `https://api.suno.ai/generate/v2`.
- **–ó–∞–≥–æ–ª–æ–≤–∫–∏:** `Authorization: Bearer <SUNO_API_KEY>`, `Content-Type: application/json`, `Accept: application/json`.
- **Payload:** —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä–µ `SunoGenerationPayload` (prompt, tags[], title, make_instrumental, model_version, wait_audio, optional clip/audio prompt ID).
- **–û—Ç–≤–µ—Ç:** –º–æ–≥—É—Ç –≤–æ–∑–≤—Ä–∞—â–∞—Ç—å—Å—è —Ä–∞–∑–ª–∏—á–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã (`{ id }`, `{ data: { taskId } }`, –º–∞—Å—Å–∏–≤—ã). –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–∞—Ä—Å–µ—Ä –∏–∑–≤–ª–µ–∫–∞–µ—Ç `taskId` –∏ –Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–π `jobId`.
- **–î–∞–Ω–Ω—ã–µ –≤ –ë–î:**
  - `tracks.metadata`: –¥–æ–ø–æ–ª–Ω—è–µ—Ç—Å—è `suno_task_id`, `suno_response`, `suno_generate_endpoint`, `suno_job_id` (–µ—Å–ª–∏ –ø—Ä–∏—Å—É—Ç—Å—Ç–≤—É–µ—Ç).
  - `ai_jobs`: –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è `external_id` (taskId) –∏ —Å—Ç–∞—Ç—É—Å `processing`.

### 2.2 –ü–æ–ª–ª–∏–Ω–≥ –∑–∞–¥–∞—á Suno
- **–û—Å–Ω–æ–≤–Ω–æ–π endpoint:** `https://api.sunoapi.org/api/v1/query?taskId=<id>` —Å fallback –Ω–∞ `https://api.suno.ai/generate/v2`.
- **–ü–∞—Ä—Å–∏–Ω–≥:** –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è —Ñ–æ—Ä–º–∞—Ç—ã `{ data: [] }`, `{ data: { tasks: [] } }`, –º–∞—Å—Å–∏–≤—ã –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è.
- **–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
  - –î–æ 60 –ø–æ–ø—ã—Ç–æ–∫ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 5 —Å–µ–∫—É–Ω–¥.
  - –ê–≤—Ç–æ-—Ä–µ—Ç—Ä–∞–π –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö 200/202 (–ø—É—Å—Ç–æ–π –æ—Ç–≤–µ—Ç), 429, ‚â•500, –ª–∏–±–æ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–º —Å—Ç–∞—Ç—É—Å–µ.
  - –§–∞—Ç–∞–ª—å–Ω—ã–µ –æ—à–∏–±–∫–∏ (<500, ‚â†429) –ø–æ–º–µ—á–∞—é—Ç —Ç—Ä–µ–∫ –∏ `ai_jobs` –∫–∞–∫ failed.
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**
  - `tracks` ‚Üí —Å—Ç–∞—Ç—É—Å `completed`, –∑–∞–≥—Ä—É–∑–∫–∞ –∞—É–¥–∏–æ/–æ–±–ª–æ–∂–∫–∏/–≤–∏–¥–µ–æ –≤ Storage, `metadata` –ø–æ–ø–æ–ª–Ω—è–µ—Ç—Å—è:
    - `suno_data` ‚Äî –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–π –º–∞—Å—Å–∏–≤ tasks;
    - `suno_last_poll_endpoint`, `suno_last_poll_code`, `suno_last_poll_at`, `suno_poll_snapshot` (–ø–æ–ª–Ω—ã–π JSON).
  - `track_versions` ‚Üí –∫–∞–∂–¥–∞—è –≤–µ—Ä—Å–∏—è –ø–æ–ª—É—á–∞–µ—Ç `metadata.suno_last_poll_endpoint` –∏ `suno_track_data`.

### 2.3 –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ —Å—Ç–µ–º–æ–≤
- **Endpoint:** `https://api.sunoapi.org/api/v1/vocal-removal/generate` (fallback —á–µ—Ä–µ–∑ `SUNO_STEM_URL`).
- **Payload:** `{ taskId, audioId, type: separationMode, callBackUrl }`.
- **–û—Ç–≤–µ—Ç:** —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω —á–µ—Ä–µ–∑ –æ–±—â–∏–π –ø–∞—Ä—Å–µ—Ä `parseTaskId`.
- **–•—Ä–∞–Ω–∏–º—ã–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ:** `stem_task_id`, `stem_separation_mode`, `suno_last_stem_endpoint`, `suno_last_stem_snapshot`.
- **Callback (`stems-callback`)**: —Å–æ–≤–º–µ—Å—Ç–∏–º —Å –Ω–æ–≤—ã–º–∏ –ø–æ–ª—è–º–∏ –∏ –Ω–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π.

### 2.4 –ë–∞–ª–∞–Ω—Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- **Edge Function `get-balance`** —Ç–µ–ø–µ—Ä—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –±–∞–ª–∞–Ω—Å –ø–æ —Ü–µ–ø–æ—á–∫–µ endpoints: –∫–∞—Å—Ç–æ–º–Ω—ã–π `SUNO_BALANCE_URL` ‚Üí `https://api.sunoapi.org/api/v1/account/balance` ‚Üí –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π `https://studio-api.suno.ai/api/billing/info/`, –Ω–æ—Ä–º–∞–ª–∏–∑—É—è –æ—Ç–≤–µ—Ç—ã –∏ –ª–æ–≥–∏—Ä—É—è –ø—Ä–∏—á–∏–Ω—É –æ—Ç–∫–∞–∑–∞ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞.

---

## 3. –£–ª—É—á—à–µ–Ω–∏—è –ø–æ—Å–ª–µ –∞—É–¥–∏—Ç–∞

| –û–±–ª–∞—Å—Ç—å | –ò–∑–º–µ–Ω–µ–Ω–∏–µ | –≠—Ñ—Ñ–µ–∫—Ç |
| ------- | --------- | ------ |
| –î—Ä–∞–π–≤–µ—Ä Suno | –ù–æ–≤—ã–π –º–æ–¥—É–ª—å `supabase/functions/_shared/suno.ts` —Å –µ–¥–∏–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–æ–º –∏ fallback-—Ü–µ–ø–æ—á–∫–æ–π | –°–æ–∫—Ä–∞—â–∞–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ, –¥–æ–±–∞–≤–ª—è–µ—Ç —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º–æ—Å—Ç—å —á–µ—Ä–µ–∑ `SUNO_*_URL`. |
| –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ | –†–∞—Å—à–∏—Ä–µ–Ω—ã –ø–æ–ª—è —Ç—Ä–µ–∫–æ–≤ –∏ –≤–µ—Ä—Å–∏–π (`suno_last_poll_*`, `suno_poll_snapshot`, `suno_last_stem_*`) | –ü–æ–≤—ã—à–µ–Ω–∞ –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å, –º–æ–∂–Ω–æ –ø–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å –∏–ª–∏ –ø—Ä–æ–≤–µ—Å—Ç–∏ –∞—É–¥–∏—Ç –±–µ–∑ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ –ª–æ–≥–∞–º. |
| –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ | –ö–ª–∞—Å—Å `SunoApiError` + user-friendly —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —Ä—É—Å—Å–∫–æ–º | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã (`–Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ —Å—Ä–µ–¥—Å—Ç–≤`, `–ª–∏–º–∏—Ç Suno`, `Suno –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω`). |
| –†–µ—Ç—Ä–µ–∏ | –ì–∏–±–∫–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–≤—Ç–æ—Ä–æ–≤ –¥–ª—è 429/5xx | –£–º–µ–Ω—å—à–µ–Ω–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ª–æ–∂–Ω—ã—Ö –ø–∞–¥–µ–Ω–∏–π –ø—Ä–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Å–±–æ—è—Ö Suno. |
| –¢–µ—Å—Ç—ã | `supabase/functions/tests/generate-suno.test.ts` –æ–±–Ω–æ–≤–ª—ë–Ω –ø–æ–¥ –Ω–æ–≤—ã–π endpoint –∏ —Å–æ–æ–±—â–µ–Ω–∏—è | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç idempotency, –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –∏ —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –Ω–æ–≤—ã–º –∫–ª–∏–µ–Ω—Ç–æ–º. |
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | –≠—Ç–æ—Ç –æ—Ç—á—ë—Ç + –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `docs/api/API.md` –∏ `CHANGELOG.md` | –ü—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –∫–æ–º–∞–Ω–¥—ã. |

---

## 4. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –¥–∞–ª—å–Ω–µ–π—à–∏–µ —à–∞–≥–∏

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –¥–∞—à–±–æ—Ä–¥—ã –ø–æ –ø–æ–ª—è–º `suno_last_poll_code` –∏ `suno_last_stem_endpoint`, —á—Ç–æ–±—ã —Ä–∞–Ω–Ω–µ–µ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—Ç—å –¥–µ–≥—Ä–∞–¥–∞—Ü–∏—é API.
2. **–°–µ–∫—Ä–µ—Ç—ã:** –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–∫—Ä—É–∂–µ–Ω–∏–µ `SUNO_GENERATE_URL`, `SUNO_QUERY_URL`, `SUNO_STEM_URL` –¥–ª—è –∫–∞—Å—Ç–æ–º–Ω—ã—Ö –ø—Ä–æ–∫—Å–∏, –Ω–µ –º–µ–Ω—è—è –∫–æ–¥.
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –¥–æ–±–∞–≤–∏—Ç—å Deno-—Ç–µ—Å—Ç—ã –¥–ª—è `requestStemSeparation` –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Å—Ü–µ–Ω–∞—Ä–∏–π `defaultPollSunoCompletion` —Å mock fetch.
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** –æ–±–Ω–æ–≤–ª—è—Ç—å –¥–∞–Ω–Ω—ã–π –æ—Ç—á–µ—Ç –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö Suno API; –≤–∫–ª—é—á–∏—Ç—å –≤ onboarding —Å—Å—ã–ª–∫—É –Ω–∞ –Ω–µ–≥–æ.

---

## 5. –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

- ‚úÖ `supabase/functions/tests/generate-suno.test.ts` ‚Äî –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á, –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å, –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫.
- ‚úÖ –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (`curl -I https://api.sunoapi.org/`) ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –ø—Ä–æ–∫—Å–∏ (—Å–º. –ª–æ–≥ –∫–æ–º–∞–Ω–¥—ã). 
- ‚úÖ –õ–∏–Ω—Ç–µ—Ä/—Ç–∞–π–ø—á–µ–∫–∏: `npm run typecheck` (—Å–º. —Ä–∞–∑–¥–µ–ª Testing –≤ –∏—Ç–æ–≥–æ–≤–æ–º –æ—Ç—á—ë—Ç–µ PR).

> **–ò—Ç–æ–≥:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Suno API —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º, –æ–±–ª–∞–¥–∞–µ—Ç fallback-–º–µ—Ö–∞–Ω–∏–∑–º–∞–º–∏ –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏.
