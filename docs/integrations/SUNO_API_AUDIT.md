# üîç Suno API Integration Audit ‚Äî 16 –æ–∫—Ç—è–±—Ä—è 2025

**–î–∞—Ç–∞ –∞—É–¥–∏—Ç–∞:** 16 –æ–∫—Ç—è–±—Ä—è 2025
**–í–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã:** 2.6.2
**–ö–æ–Ω—Ç–µ–∫—Å—Ç:** –ü–æ–ª–Ω–∞—è —Ä–µ–≤–∏–∑–∏—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å [sunoapi.org](https://api.sunoapi.org) –∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–º–∏ Suno endpoints –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º—É–∑—ã–∫–∏, –ø–æ—Å—Ç-–ø–æ–ª–ª–∏–Ω–≥–∞ –∏ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏—è —Å—Ç–µ–º–æ–≤. –¶–µ–ª—å ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –∞–∫—Ç—É–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–µ–π, —É—Å–∏–ª–∏—Ç—å –æ—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å –∏ —Ä–∞—Å—à–∏—Ä–∏—Ç—å –Ω–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å.

---

## 1. –ò—Å—Ç–æ—á–Ω–∏–∫–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

| –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è–ª–∏ | –†–µ–∑—É–ª—å—Ç–∞—Ç | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
| ------------- | --------- | ---------- |
| `https://api.sunoapi.org/` (HTTP headers) | ‚úÖ 200 ‚Üí 404 JSON body | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å reverse-proxy, –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è —Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ (—Å–º. `curl -I` –≤ –æ—Ç—á—ë—Ç–µ 16.10.2025). |
| `https://api.sunoapi.org/api/v1/docs` / `swagger-ui/index.html` | ‚ö†Ô∏è 404 | –û—Ç–∫—Ä—ã—Ç—ã–π Swagger –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω; API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –∑–∞–∫—Ä—ã—Ç—É—é —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é. |
| –†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π edge-—Ñ—É–Ω–∫—Ü–∏–π `supabase/functions` | ‚úÖ | –ê–∫—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω –º–æ–¥—É–ª—å `_shared/suno.ts`, –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ —Å–≤—è–∑–∫–∞ generate/query/stems/lyrics. |
| –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –æ—Ç—á—ë—Ç—ã (`project-management/reports/*`) | ‚úÖ | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–æ —Å `project-management/reports/2025-10-16-repo-audit.md` –∏ —Å—Ç–∞—Ç—É—Å-–¥—ç—à–±–æ—Ä–¥–∞–º–∏. |

> **–í—ã–≤–æ–¥:** –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è `sunoapi.org` –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞ –ø—É–±–ª–∏—á–Ω–æ, –ø–æ—ç—Ç–æ–º—É –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ —á–µ—Ä–µ–∑ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ API –∏ –æ–±—Ä–∞—Ç–Ω—É—é –∏–Ω–∂–µ–Ω–µ—Ä–∏—é –æ—Ç–≤–µ—Ç–æ–≤.

---

## 2. –¢–æ—á–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –∏ –ø–æ–∫—Ä—ã—Ç–∏—è

### 2.1 –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç—Ä–µ–∫–æ–≤ (Edge Function `generate-suno`)
- **–û—Å–Ω–æ–≤–Ω–æ–π endpoint:** `https://api.sunoapi.org/api/v1/generate` (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö –ø—Ä–æ–∫—Å–∏ —á–µ—Ä–µ–∑ `SUNO_GENERATE_URL`, –∑–Ω–∞—á–µ–Ω–∏—è —Ä–∞–∑–¥–µ–ª—è—é—Ç—Å—è –∑–∞–ø—è—Ç—ã–º–∏).
- **–ó–∞–≥–æ–ª–æ–≤–∫–∏:** `Authorization: Bearer <SUNO_API_KEY>`, `Content-Type: application/json`, `Accept: application/json`.
- **Payload:** `SunoGenerationPayload` (prompt, tags[], title, customMode, instrumental, model, waitAudio, optional audioId/jobId).
- **–û—Ç–≤–µ—Ç:** `parseTaskId` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `{ taskId }`, `{ data: { taskId } }`, `[{ id }]`, `[{ taskId }]`.
- **–î–∞–Ω–Ω—ã–µ –≤ –ë–î:**
  - `tracks.metadata`: `suno_task_id`, `suno_generate_endpoint`, `suno_response`, `suno_job_id`.
  - `ai_jobs`: `external_id`, `provider_payload`, `retry_count`, `last_error`.

- **–û—Å–Ω–æ–≤–Ω–æ–π endpoint:** `https://api.sunoapi.org/api/v1/generate/record-info` (–ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è –º–∞—Å—Å–∏–≤ URL —á–µ—Ä–µ–∑ `SUNO_QUERY_URL`; –ø–ª–µ–π—Å—Ö–æ–ª–¥–µ—Ä `{taskId}` –ø–æ–¥–º–µ–Ω—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏).
- **–ü–∞—Ä—Å–∏–Ω–≥:** `parseQueryResponse` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç `{ data: [] }`, `{ data: { tasks: [] } }`, –≤–µ—Ä—Ö–Ω–µ—É—Ä–æ–≤–Ω–µ–≤—ã–µ –º–∞—Å—Å–∏–≤—ã –∏ –≤–ª–æ–∂–µ–Ω–Ω—ã–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏.
- **–ü–æ–≤–µ–¥–µ–Ω–∏–µ:**
  - –§—É–Ω–∫—Ü–∏—è `queryTask` –ø—Ä–æ—Ö–æ–¥–∏—Ç –ø–æ —Å–ø–∏—Å–∫—É `queryEndpoints`, —Ñ–æ—Ä–º–∏—Ä—É—è URL —Å `appendQueryParam`.
  - –ü—Ä–∏ –Ω–µ—É—Å–ø–µ—Ö–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ —Å–ª–µ–¥—É—é—â–∏–π endpoint; –ø–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –æ—Ä–≥–∞–Ω–∏–∑—É—é—Ç—Å—è –≤—ã–∑—ã–≤–∞—é—â–∏–º –≤–æ—Ä–∫–µ—Ä–æ–º (poll loop –≤ edge-—Ñ—É–Ω–∫—Ü–∏—è—Ö/–æ—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä–µ).
  - –û—à–∏–±–∫–∏ (<500, ‚â†429) –ø–æ–º–µ—á–∞—é—Ç `tracks`, `ai_jobs`, `lyrics_jobs` –∫–∞–∫ `failed`, JSON –æ—Ç–≤–µ—Ç–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ `metadata`.
- **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:**
  - `tracks`: —Å—Ç–∞—Ç—É—Å `completed`, –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –≤ Storage, —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è `suno_data`, `suno_last_poll_endpoint/code/at`, `suno_poll_snapshot`.
  - `track_versions`: `metadata.suno_track_data`, `suno_last_poll_endpoint`, `suno_last_poll_code`.
  - `ai_jobs`: `completed_at`, `metadata.last_poll`, `retry_count`.

- **Endpoint:** `https://api.sunoapi.org/api/v1/vocal-removal/generate` (–ø–æ–¥–¥–µ—Ä–∂–∫–∞ –º–∞—Å—Å–∏–≤–∞ —á–µ—Ä–µ–∑ `SUNO_STEM_URL`).
- **Payload:** `SunoStemRequest` `{ taskId, audioId, type, callBackUrl }`.
- **–û—Ç–≤–µ—Ç:** `parseTaskId`.
- **–ü–æ–ª–ª–∏–Ω–≥:** `queryStemTask` –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `SUNO_STEM_QUERY_URL` (–Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–Ω–∞—á–µ–Ω–∏–π —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é).
- **–ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ:** `stem_task_id`, `stem_separation_mode`, `suno_last_stem_endpoint`, `suno_last_stem_code`, `suno_last_stem_snapshot`, —Å—Å—ã–ª–∫–∏ –Ω–∞ `assets`.
- **Callback (`stems-callback`)**: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç URL –∞–∫—Ç–∏–≤–æ–≤ –∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç `tracks.metadata.stems`.

### 2.4 –ë–∞–ª–∞–Ω—Å –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
- **Edge Function `get-balance`** –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–±–∏—Ä–∞–µ—Ç URL (`SUNO_BALANCE_URL` ‚Üí `api/v1/generate/credit` ‚Üí `api/v1/account/balance` ‚Üí `studio-api.suno.ai/api/billing/info`).
- **–í—ã—Ö–æ–¥:** `{ balance, currency, lastEndpoint, error }`.
- **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:** –∫–∞–∂–¥—ã–π —à–∞–≥ —Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –≤ `logger.info/error`, —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø—Ä–∏—á–∏–Ω–∞ fallback.

---

## 3. –£–ª—É—á—à–µ–Ω–∏—è –ø–æ—Å–ª–µ –∞—É–¥–∏—Ç–∞ (–æ–∫—Ç—è–±—Ä—å 2025)

| –û–±–ª–∞—Å—Ç—å | –ò–∑–º–µ–Ω–µ–Ω–∏–µ | –≠—Ñ—Ñ–µ–∫—Ç |
| ------- | --------- | ------ |
| –î—Ä–∞–π–≤–µ—Ä Suno | `_shared/suno.ts` –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–∞—Å—Å–∏–≤—ã —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤, –æ–±—â—É—é retry-–ª–æ–≥–∏–∫—É –∏ —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ | –ü–æ–∑–≤–æ–ª—è–µ—Ç –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç—å –ø—Ä–æ–∫—Å–∏ –±–µ–∑ –¥–µ–ø–ª–æ—è, —É–ø—Ä–æ—â–∞–µ—Ç –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫—É.
| –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ | –†–∞—Å—à–∏—Ä–µ–Ω –Ω–∞–±–æ—Ä –ø–æ–ª–µ–π (`suno_last_poll_code`, `suno_last_stem_code`, `suno_poll_snapshot`, `suno_last_stem_snapshot`) | –ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å –∏ –ø–æ–≤—Ç–æ—Ä–Ω—ã–π –∞–Ω–∞–ª–∏–∑ –∑–∞–¥–∞—á –±–µ–∑ –æ–±—Ä–∞—â–µ–Ω–∏—è –∫ —Å—Ç–æ—Ä–æ–Ω–Ω–∏–º –ª–æ–≥–∞–º.
| –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ | `SunoApiError` + –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π –¥–ª—è UI (`–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –∫—Ä–µ–¥–∏—Ç–æ–≤`, `Suno –≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω`) | –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø–æ–ª—É—á–∞—é—Ç –ª–æ–∫–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏ —Ç–æ—á–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è.
| –†–µ—Ç—Ä–µ–∏ | –≠–∫—Å–ø–æ–Ω–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–π backoff, –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –ø—É—Å—Ç—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤/202, –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è 429 | –°–Ω–∏–∂–µ–Ω–∏–µ –ª–æ–∂–Ω—ã—Ö –ø–∞–¥–µ–Ω–∏–π –ø—Ä–∏ –Ω–∞–≥—Ä—É–∑–∫–µ –∏ –Ω–µ—Å—Ç–∞–±–∏–ª—å–Ω–æ–º API.
| –¢–µ—Å—Ç—ã | –û–±–Ω–æ–≤–ª–µ–Ω—ã `supabase/functions/tests/generate-suno.test.ts`, –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è —Å—Ç–µ–º–æ–≤ | –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫.
| –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è | –û–±–Ω–æ–≤–ª–µ–Ω—ã `docs/api/API.md`, `docs/DEVELOPER_DASHBOARD.md`, —Ç–µ–∫—É—â–∏–π –æ—Ç—á—ë—Ç | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω–∞ —Å –¥–∞—à–±–æ—Ä–¥–∞–º–∏ –∏ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞–º–∏.

---

## 4. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –∏ –¥–∞–ª—å–Ω–µ–π—à–∏–µ —à–∞–≥–∏

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** —Å–æ–±—Ä–∞—Ç—å –¥–∞—à–±–æ—Ä–¥—ã –ø–æ `suno_last_poll_code`, `suno_last_stem_code`, –≤—Ä–µ–º–µ–Ω–∏ –æ–∂–∏–¥–∞–Ω–∏—è (—Å–º. `docs/DEVELOPER_DASHBOARD.md`).
2. **–°–µ–∫—Ä–µ—Ç—ã:** —Ö—Ä–∞–Ω–∏—Ç—å `SUNO_*` –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ –º–µ–Ω–µ–¥–∂–µ—Ä–µ —Å–µ–∫—Ä–µ—Ç–æ–≤ (Supabase/Vault), –∏–∑–±–µ–≥–∞—Ç—å —Ö–∞—Ä–¥–∫–æ–¥–∞ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏.
3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** —Ä–∞—Å—à–∏—Ä–∏—Ç—å –ø–æ–∫—Ä—ã—Ç–∏–µ —Ñ—É–Ω–∫—Ü–∏–µ–π `queryStemTask` –∏ –±–ª–æ–∫–æ–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ª–∏—Ä–∏–∫–∏ (mock fetch + snapshot).
4. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:** —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —ç—Ç–æ—Ç –æ—Ç—á—ë—Ç —Å `docs/integrations/THIRD_PARTY_OVERVIEW.md` –∏ –≤–∫–ª—é—á–∞—Ç—å —Å—Å—ã–ª–∫—É –≤ onboarding.

---

## 5. –ü–æ–∫—Ä—ã—Ç–∏–µ —Ç–µ—Å—Ç–∞–º–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è

- ‚úÖ `supabase/functions/tests/generate-suno.test.ts`, `separate-stems.test.ts` ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è, —Å—Ç–µ–º—ã, –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫.
- ‚úÖ –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (`curl -I https://api.sunoapi.org/`, `curl -I https://api.sunoapi.org/api/v1/generate`) ‚Äî –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω –æ—Ç–≤–µ—Ç —Å–µ—Ä–≤–∏—Å–∞.
- ‚úÖ –õ–∏–Ω—Ç–µ—Ä/—Ç–∞–π–ø—á–µ–∫–∏: `npm run typecheck`, `npm run docs:validate` (—Ñ–∏–∫—Å–∏—Ä—É–µ—Ç—Å—è –≤ developer dashboard).

> **–ò—Ç–æ–≥:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Suno API —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –µ–¥–∏–Ω—ã–π —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω—ã–π –Ω–∞–±–æ—Ä endpoints –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø–æ–ª–Ω—ã–π –Ω–∞–±–æ—Ä –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏.
