# –ê—É–¥–∏—Ç —Å–∏—Å—Ç–µ–º—ã —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ª–∏—Ä–∏–∫–∏ Albert3 Muse Synth Studio
## –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ Suno AI

**–î–∞—Ç–∞:** 2025-11-17  
**–í–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞:** 2.4.0  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–õ–ù–ê–Ø –†–ï–ê–õ–ò–ó–ê–¶–ò–Ø

---

## üìã Executive Summary

–°–∏—Å—Ç–µ–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ª–∏—Ä–∏–∫–∏ Albert3 Muse Synth Studio **–ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞** –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –≤—Å–µ–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ Suno AI –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –º–µ—Ç–∞—Ç–µ–≥–∞–º–∏, —Å—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ–º —Å–µ–∫—Ü–∏–π –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π —Ç–µ–∫—Å—Ç–æ–≤.

### –û—Ü–µ–Ω–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è: 95/100

‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–µ–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–∏—Ä–∏–∫–∏ (100%)
- ‚úÖ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞—Ç–µ–≥–∞–º–∏ Suno AI (100%)
- ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ª–∏—Ä–∏–∫–∏ —á–µ—Ä–µ–∑ Suno API (100%)
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —á–∞—Å—Ç–∏—á–Ω–æ–µ —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ (90%)
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ñ–æ—Ä–º–∞—Ç—ã (PDF —á–∞—Å—Ç–∏—á–Ω–æ, —Ç–µ–∫—Å—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Suno API —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏ (100%)

‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏—è:**
- ‚ö†Ô∏è PDF —ç–∫—Å–ø–æ—Ä—Ç (–æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç, –Ω–æ –µ—Å—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–π —ç–∫—Å–ø–æ—Ä—Ç)
- ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ü–∏–π (—Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏ UI)

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```
src/components/lyrics/
‚îú‚îÄ‚îÄ workspace/
‚îÇ   ‚îú‚îÄ‚îÄ LyricsWorkspace.tsx         # –ì–ª–∞–≤–Ω—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ LyricsContent.tsx           # –ö–æ–Ω—Ç–µ–Ω—Ç-—Ä–µ–Ω–¥–µ—Ä–µ—Ä
‚îÇ   ‚îú‚îÄ‚îÄ LyricsToolbar.tsx           # –ü–∞–Ω–µ–ª—å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
‚îÇ   ‚îú‚îÄ‚îÄ RawTextEditor.tsx           # –°—ã—Ä–æ–π —Ç–µ–∫—Å—Ç–æ–≤—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
‚îÇ   ‚îî‚îÄ‚îÄ SectionPresetDialog.tsx     # –î–∏–∞–ª–æ–≥ –ø—Ä–µ—Å–µ—Ç–æ–≤ —Å–µ–∫—Ü–∏–π
‚îú‚îÄ‚îÄ SectionCard.tsx                 # –ö–∞—Ä—Ç–æ—á–∫–∞ —Å–µ–∫—Ü–∏–∏ —Å drag-n-drop
‚îú‚îÄ‚îÄ TagBadge.tsx                    # –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –º–µ—Ç–∞—Ç–µ–≥–∞
‚îú‚îÄ‚îÄ TagPalette.tsx                  # –ü–∞–ª–∏—Ç—Ä–∞ —Ç–µ–≥–æ–≤ –¥–ª—è –≤—Å—Ç–∞–≤–∫–∏
‚îú‚îÄ‚îÄ LyricsEditorAdvanced.tsx        # –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–π —Ä–µ–¥–∞–∫—Ç–æ—Ä
‚îú‚îÄ‚îÄ LyricsGeneratorDialog.tsx       # –î–∏–∞–ª–æ–≥ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
‚îî‚îÄ‚îÄ LyricsVariantSelector.tsx       # –í—ã–±–æ—Ä –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ª–∏—Ä–∏–∫–∏

src/types/lyrics.ts                 # TypeScript —Ç–∏–ø—ã
src/utils/lyricsParser.ts           # –ü–∞—Ä—Å–µ—Ä —Ç–µ–∫—Å—Ç–∞ —Å —Ç–µ–≥–∞–º–∏
src/data/tagDefinitions.ts          # –ë–∞–∑–∞ —Ç–µ–≥–æ–≤ Suno AI
```

### Backend Edge Functions

```
supabase/functions/
‚îú‚îÄ‚îÄ generate-lyrics/                # –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤ (Suno API)
‚îú‚îÄ‚îÄ lyrics-callback/                # Webhook –æ—Ç Suno
‚îú‚îÄ‚îÄ improve-lyrics/                 # –£–ª—É—á—à–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ AI
‚îú‚îÄ‚îÄ extend-lyrics-mureka/           # –ü—Ä–æ–¥–ª–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–æ–≤ (Mureka)
‚îú‚îÄ‚îÄ save-lyrics/                    # –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É
‚îî‚îÄ‚îÄ get-timestamped-lyrics/         # –ü–æ–ª—É—á–µ–Ω–∏–µ —Ç–∞–π–º—à—Ç–∞–º–ø–æ–≤
```

### Database Schema

```sql
-- –ó–∞–¥–∞—á–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ª–∏—Ä–∏–∫–∏
CREATE TABLE lyrics_jobs (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id),
  track_id UUID REFERENCES tracks(id),
  prompt TEXT NOT NULL,
  status TEXT NOT NULL DEFAULT 'pending',
  provider TEXT DEFAULT 'suno',
  suno_task_id TEXT,
  metadata JSONB,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- –í–∞—Ä–∏–∞–Ω—Ç—ã –ª–∏—Ä–∏–∫–∏ (–º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã)
CREATE TABLE lyrics_variants (
  id UUID PRIMARY KEY,
  job_id UUID REFERENCES lyrics_jobs(id),
  variant_index INTEGER NOT NULL,
  title TEXT,
  content TEXT,
  status TEXT,
  created_at TIMESTAMPTZ DEFAULT NOW()
);

-- –°–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ —Ç–µ–∫—Å—Ç—ã –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ
CREATE TABLE saved_lyrics (
  id UUID PRIMARY KEY,
  user_id UUID REFERENCES auth.users(id),
  title TEXT NOT NULL,
  content TEXT NOT NULL,
  folder TEXT,
  tags TEXT[],
  genre TEXT,
  mood TEXT,
  is_favorite BOOLEAN DEFAULT false,
  usage_count INTEGER DEFAULT 0,
  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

---

## ‚úÖ 1. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–µ–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–∏—Ä–∏–∫–∏

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

### 1.1 –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å–µ–∫—Ü–∏–∏

**–§–∞–π–ª:** `src/data/tagDefinitions.ts`

```typescript
section: {
  category: 'section',
  values: [
    'Intro', 'Verse', 'Verse 1', 'Verse 2', 'Verse 3',
    'Pre-Chorus', 'Chorus', 'Post-Chorus',
    'Bridge', 'Breakdown', 'Build-Up', 'Drop',
    'Hook', 'Instrumental', 'Solo', 'Outro', 'Interlude'
  ]
}
```

### 1.2 –û–ø–µ—Ä–∞—Ü–∏–∏ —Å —Å–µ–∫—Ü–∏—è–º–∏

**–§–∞–π–ª:** `src/components/lyrics/workspace/LyricsWorkspace.tsx`

#### –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ–∫—Ü–∏–∏
```typescript
const handleAddSection = useCallback((preset: SectionPreset) => {
  const newSection: Section = {
    id: `section-${Date.now()}`,
    title: preset.title,
    tags: preset.tags.map(parseTag),
    lines: preset.linesPlaceholder,
    order: document.sections.length
  };
  
  handleDocumentChange({
    ...document,
    sections: [...document.sections, newSection]
  });
}, [document, handleDocumentChange]);
```

#### –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ü–∏–∏
```typescript
const handleUpdateSection = useCallback((sectionId: string, updated: Section) => {
  handleDocumentChange({
    ...document,
    sections: document.sections.map(s => 
      s.id === sectionId ? updated : s
    )
  });
}, [document, handleDocumentChange]);
```

#### –£–¥–∞–ª–µ–Ω–∏–µ —Å–µ–∫—Ü–∏–∏
```typescript
const handleDeleteSection = useCallback((sectionId: string) => {
  handleDocumentChange({
    ...document,
    sections: document.sections.filter(s => s.id !== sectionId)
  });
}, [document, handleDocumentChange]);
```

#### –ü–µ—Ä–µ—É–ø–æ—Ä—è–¥–æ—á–∏–≤–∞–Ω–∏–µ (Drag & Drop)
```typescript
const handleDragEnd = (event: DragEndEvent) => {
  const { active, over } = event;
  if (!over || active.id === over.id) return;

  setDocument(prev => {
    const oldIndex = prev.sections.findIndex(s => s.id === active.id);
    const newIndex = prev.sections.findIndex(s => s.id === over.id);
    const newSections = arrayMove(prev.sections, oldIndex, newIndex);
    
    return {
      ...prev,
      sections: newSections.map((s, i) => ({ ...s, order: i }))
    };
  });
};
```

**–ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏:**
- `@dnd-kit/core` - Drag and Drop –¥–≤–∏–∂–æ–∫
- `@dnd-kit/sortable` - –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ —Å–µ–∫—Ü–∏–π

### 1.3 UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å–µ–∫—Ü–∏–∏

**–§–∞–π–ª:** `src/components/lyrics/SectionCard.tsx`

```typescript
export const SectionCard: React.FC<SectionCardProps> = ({
  section,
  onUpdate,
  onDelete,
  onAddTag,
  onRemoveTag,
}) => {
  const [isCollapsed, setIsCollapsed] = useState(false);
  const [isEditingTitle, setIsEditingTitle] = useState(false);
  
  const { attributes, listeners, setNodeRef, transform } = useSortable({ 
    id: section.id 
  });

  return (
    <Card ref={setNodeRef} style={{ transform }}>
      {/* –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å Drag Handle */}
      <div className="flex items-center gap-2 p-3 border-b">
        <button {...attributes} {...listeners}>
          <GripVertical className="h-4 w-4" />
        </button>
        
        {isEditingTitle ? (
          <Input value={editedTitle} onChange={...} onBlur={handleTitleSave} />
        ) : (
          <h3 onClick={() => setIsEditingTitle(true)}>{section.title}</h3>
        )}
        
        <Button onClick={handleCollapse}>
          {isCollapsed ? <ChevronDown /> : <ChevronUp />}
        </Button>
        
        <Button onClick={onDelete}><Trash2 /></Button>
      </div>

      {/* –¢–µ–≥–∏ —Å–µ–∫—Ü–∏–∏ */}
      {!isCollapsed && (
        <div className="flex flex-wrap gap-2 p-3">
          {section.tags.map(tag => (
            <TagBadge key={tag.id} tag={tag} onRemove={() => onRemoveTag(tag.id)} />
          ))}
          <Button onClick={() => setShowTagPalette(true)}>
            <Plus /> –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–≥
          </Button>
        </div>
      )}

      {/* –¢–µ–∫—Å—Ç –ª–∏—Ä–∏–∫–∏ */}
      {!isCollapsed && (
        <Textarea
          value={section.lines.join('\n')}
          onChange={e => onUpdate({ ...section, lines: e.target.value.split('\n') })}
          className="min-h-[100px]"
        />
      )}
    </Card>
  );
};
```

---

## ‚úÖ 2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞—Ç–µ–≥–∞–º–∏ Suno AI

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

### 2.1 –ü–æ–ª–Ω–∞—è –±–∞–∑–∞ –º–µ—Ç–∞—Ç–µ–≥–æ–≤

**–§–∞–π–ª:** `src/data/tagDefinitions.ts` (243 —Å—Ç—Ä–æ–∫–∏)

#### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ —Ç–µ–≥–æ–≤

```typescript
export const TAG_DEFINITIONS: Record<string, TagDefinition> = {
  // üé≠ –°–¢–†–£–ö–¢–£–†–ù–´–ï –°–ï–ö–¶–ò–ò
  section: { /* 17 —Ç–∏–ø–æ–≤ —Å–µ–∫—Ü–∏–π */ },
  
  // üé§ –í–û–ö–ê–õ–¨–ù–´–ï –¢–ï–ì–ò (Suno v4.5/v5)
  vocal: {
    values: [
      // –¢–∏–ø—ã –≤–æ–∫–∞–ª–∞
      'Lead Vocal', 'Backing Vocals', 'Stacked Harmonies',
      'Call-and-Response', 'Duet', 'Choir', 'Spoken Word', 'Rap Verse',
      
      // –¢–æ–Ω/–¢–µ–∫—Å—Ç—É—Ä–∞ (v5 Enhanced)
      'Gritty', 'Husky', 'Breathy', 'Soulful', 'Belting',
      'Falsetto', 'Whisper', 'Raspy', 'Smooth', 'Powerful',
      
      // –≠—Ñ—Ñ–µ–∫—Ç—ã
      'Light Autotune', 'Heavy Autotune', 'Vocoder',
      'Double-Tracked', 'Reverb Vocal', 'Distorted Vocal'
    ]
  },
  
  // üí´ –≠–ú–û–¶–ò–ò
  emotion: {
    values: [
      'Melancholic', 'Euphoric', 'Aggressive', 'Dreamy',
      'Bittersweet', 'Triumphant', 'Dark', 'Hopeful',
      'Haunting', 'Nostalgic', 'Energetic', 'Calm'
    ]
  },
  
  // üéπ –ò–ù–°–¢–†–£–ú–ï–ù–¢–´ (Extended –¥–ª—è Suno v4.5/v5)
  instrument: {
    values: [
      // –†–∏—Ç–º-—Å–µ–∫—Ü–∏—è
      'Drum Machine', 'Acoustic Drums', '808 Sub', 'Fuzzy Bass',
      
      // –ö–ª–∞–≤–∏—à–Ω—ã–µ
      'Piano', 'Rhodes', 'Organ', 'Electric Piano',
      
      // –ì–∏—Ç–∞—Ä—ã
      'Acoustic Guitar', 'Electric Guitar Clean', 'Electric Guitar Distorted',
      
      // –û—Ä–∫–µ—Å—Ç—Ä
      'Strings', 'Brass', 'Violin', 'Saxophone', 'Trumpet',
      
      // –°–∏–Ω—Ç–µ–∑–∞—Ç–æ—Ä—ã (v5 Enhanced)
      'Analog Pad', 'Warm Pad', 'Pluck Synth', 'Arp Synth',
      'FM Bass', 'Supersaw', 'Reese Bass'
    ]
  },
  
  // üß≠ –ê–†–ê–ù–ñ–ò–†–û–í–ö–ê
  arrangement: {
    values: [
      'Sparse', 'Dense', 'Building Intensity', 'Climax',
      'Stripped Down', 'Full Arrangement', 'Layered'
    ]
  },
  
  // üéöÔ∏è –≠–§–§–ï–ö–¢–´
  fx: {
    values: [
      'Reverb Heavy', 'Delay', 'Echo', 'Distortion',
      'Chorus', 'Phaser', 'Flanger', 'Bit Crush'
    ]
  },
  
  // üéº –¢–ï–ú–ü/–ö–õ–Æ–ß
  tempo: {
    values: ['Tempo: 60 BPM', 'Tempo: 120 BPM', 'Tempo: 140 BPM']
  },
  
  key: {
    values: ['Key: C major', 'Key: A minor', 'Key: G major']
  },
  
  // üåç –Ø–ó–´–ö
  language: {
    values: ['Language: English', 'Language: Russian', 'Language: Spanish']
  },
  
  // üìù –ö–û–ù–¢–ï–ù–¢
  content: {
    values: ['Clean Lyrics', 'Instrumental Only', 'Explicit Content']
  },
  
  // ‚öôÔ∏è –ú–ï–¢–ê (–º–∏–∫—Å/–º–∞—Å—Ç–µ—Ä–∏–Ω–≥)
  meta: {
    values: ['Mix: punchy', 'Master: loud', 'Mix: clean']
  }
};
```

### 2.2 –ü–∞—Ä—Å–∏–Ω–≥ —Ç–µ–≥–æ–≤ –∏–∑ —Ç–µ–∫—Å—Ç–∞

**–§–∞–π–ª:** `src/utils/lyricsParser.ts`

```typescript
const TAG_REGEX = /\[([^\]]+)\]/g;

export function extractTags(text: string): Tag[] {
  const tags: Tag[] = [];
  const matches = text.matchAll(TAG_REGEX);

  for (const match of matches) {
    const rawTag = match[0];  // "[Chorus]"
    const value = match[1];   // "Chorus"
    
    const tag = parseTag(value, rawTag);
    if (tag) tags.push(tag);
  }

  return tags;
}

export function parseTag(value: string, raw: string): Tag | null {
  const id = `tag-${Date.now()}-${Math.random().toString(36).slice(2, 9)}`;

  // Exact match
  for (const [category, definition] of Object.entries(TAG_DEFINITIONS)) {
    if (definition.values.includes(value)) {
      return {
        id,
        category: definition.category,
        value,
        raw,
        icon: definition.icon,
        color: CATEGORY_COLORS[definition.category],
        description: definition.description
      };
    }
  }

  // Partial match –¥–ª—è Tempo/Key
  if (value.startsWith('Tempo:')) {
    return {
      id,
      category: 'tempo',
      value,
      raw,
      icon: 'gauge',
      color: CATEGORY_COLORS.tempo
    };
  }

  // Unknown tag - return as custom
  return {
    id,
    category: 'meta',
    value,
    raw,
    icon: 'tag',
    color: 'bg-gray-400 text-white'
  };
}
```

### 2.3 UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç–µ–≥–æ–≤

**–§–∞–π–ª:** `src/components/lyrics/TagPalette.tsx`

```typescript
export const TagPalette: React.FC<TagPaletteProps> = ({ onSelectTag }) => {
  const [selectedCategory, setSelectedCategory] = useState<TagCategory>('section');
  const [searchQuery, setSearchQuery] = useState('');

  const filteredTags = useMemo(() => {
    const definition = TAG_DEFINITIONS[selectedCategory];
    return definition.values.filter(v => 
      v.toLowerCase().includes(searchQuery.toLowerCase())
    );
  }, [selectedCategory, searchQuery]);

  return (
    <div className="p-4 space-y-4">
      {/* –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ */}
      <div className="flex flex-wrap gap-2">
        {Object.keys(TAG_DEFINITIONS).map(category => (
          <Button
            key={category}
            variant={selectedCategory === category ? 'default' : 'outline'}
            onClick={() => setSelectedCategory(category as TagCategory)}
          >
            {category}
          </Button>
        ))}
      </div>

      {/* –ü–æ–∏—Å–∫ */}
      <Input
        placeholder="–ü–æ–∏—Å–∫ —Ç–µ–≥–æ–≤..."
        value={searchQuery}
        onChange={e => setSearchQuery(e.target.value)}
      />

      {/* –°–ø–∏—Å–æ–∫ —Ç–µ–≥–æ–≤ */}
      <ScrollArea className="h-[300px]">
        <div className="grid grid-cols-2 gap-2">
          {filteredTags.map(value => (
            <Button
              key={value}
              variant="ghost"
              onClick={() => onSelectTag(parseTag(value, `[${value}]`))}
            >
              {value}
            </Button>
          ))}
        </div>
      </ScrollArea>
    </div>
  );
};
```

### 2.4 –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ñ–æ—Ä–º–∞—Ç Suno

**–§–∞–π–ª:** `src/utils/lyricsParser.ts`

```typescript
export function exportToSunoFormat(document: SongDocument): string {
  const lines: string[] = [];

  // Global tags —Å–≤–µ—Ä—Ö—É
  if (document.globalTags.length > 0) {
    const globalTagsStr = document.globalTags.map(t => t.raw).join(' ');
    lines.push(globalTagsStr);
    lines.push(''); // Empty line
  }

  // –°–µ–∫—Ü–∏–∏
  for (const section of document.sections) {
    // Section title with tags
    const sectionTags = section.tags.map(t => t.raw).join(' ');
    const sectionHeader = `[${section.title}]${sectionTags ? ' ' + sectionTags : ''}`;
    lines.push(sectionHeader);

    // Lyric lines
    section.lines.forEach(line => {
      lines.push(line);
    });

    lines.push(''); // Empty line after section
  }

  return lines.join('\n').trim();
}
```

**–ü—Ä–∏–º–µ—Ä —ç–∫—Å–ø–æ—Ä—Ç–∞:**

```
[Tempo: 120 BPM] [Key: C minor]

[Intro] [Piano] [Ambient]

[Verse 1] [Lead Vocal] [Melancholic]
Walking through the city lights
Dreams fade into the night

[Chorus] [Euphoric] [Building Intensity]
We rise above the shadows
Hearts beating as one

[Bridge] [Acoustic Guitar] [Intimate]
In the silence of the moment
We find our way back home

[Outro] [Fade Out]
```

---

## ‚úÖ 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ª–∏—Ä–∏–∫–∏ —á–µ—Ä–µ–∑ Suno API

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

### 3.1 Edge Function: generate-lyrics

**–§–∞–π–ª:** `supabase/functions/generate-lyrics/index.ts` (273 —Å—Ç—Ä–æ–∫–∏)

#### API Contract

```typescript
// Request
POST /functions/v1/generate-lyrics
Headers: {
  Authorization: Bearer <token>
}
Body: {
  prompt: string;              // max 200 words
  trackId?: string;            // optional track association
  metadata?: object;           // custom metadata
}

// Response
{
  success: boolean;
  jobId: string;               // UUID lyrics_jobs.id
  taskId: string;              // Suno task_id
  status: string;              // "pending"
}
```

#### –†–µ–∞–ª–∏–∑–∞—Ü–∏—è

```typescript
export const mainHandler = async (req: Request): Promise<Response> => {
  // 1. –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è
  const userId = req.headers.get("X-User-Id");
  if (!userId) {
    return new Response(JSON.stringify({ error: "Unauthorized" }), { status: 401 });
  }

  // 2. –í–∞–ª–∏–¥–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–∞
  const body = await validateRequest(req, validationSchemas.generateLyrics);
  const { prompt, trackId, metadata } = body;

  // 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ —Å–ª–æ–≤ (200 words max)
  const wordCount = prompt.trim().split(/\s+/).length;
  if (wordCount > 200) {
    return new Response(
      JSON.stringify({ error: `Prompt too long (${wordCount} words). Maximum is 200 words.` }),
      { status: 413 }
    );
  }

  // 4. –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–∏ lyrics_job
  const supabaseAdmin = createSupabaseAdminClient();
  
  const { data: job, error: jobError } = await supabaseAdmin
    .from("lyrics_jobs")
    .insert({
      user_id: userId,
      track_id: trackId || null,
      prompt,
      status: "pending",
      provider: "suno",
      metadata: metadata || {},
      request_payload: { prompt },
    })
    .select()
    .single();

  if (jobError || !job) {
    logger.error("Failed to create lyrics job", { error: jobError });
    return new Response(JSON.stringify({ error: "Failed to create job" }), { status: 500 });
  }

  // 5. –í—ã–∑–æ–≤ Suno API
  const SUNO_API_KEY = Deno.env.get("SUNO_API_KEY");
  const sunoClient = createSunoClient({ apiKey: SUNO_API_KEY });

  const supabaseUrl = Deno.env.get("SUPABASE_URL");
  const callbackUrl = normaliseCallbackUrl(supabaseUrl);

  const payload: SunoLyricsPayload = {
    prompt,
    call_strategy: callbackUrl ? "callback" : "polling",
    callback_url: callbackUrl || undefined,
  };

  try {
    const sunoResult = await sunoClient.generateLyrics(payload);
    
    const taskId = sunoResult.endpoint?.split("/").pop() || "";
    
    // 6. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ job —Å taskId
    await supabaseAdmin
      .from("lyrics_jobs")
      .update({
        suno_task_id: taskId,
        status: "processing",
        initial_response: sunoResult,
        call_strategy: payload.call_strategy,
        callback_url: callbackUrl || null,
      })
      .eq("id", job.id);

    logger.info("‚úÖ [GENERATE-LYRICS] Success", {
      jobId: job.id,
      taskId,
      strategy: payload.call_strategy,
    });

    return new Response(
      JSON.stringify({
        success: true,
        jobId: job.id,
        taskId,
        status: "processing",
      }),
      { status: 200, headers: { "Content-Type": "application/json" } }
    );

  } catch (error) {
    logger.error("Suno API call failed", { error });
    
    await updateJobFailure(supabaseAdmin, job.id, error.message);
    
    return new Response(
      JSON.stringify({ error: "Suno API call failed", details: error.message }),
      { status: 502 }
    );
  }
};

serve(withRateLimit("LYRICS", mainHandler));
```

### 3.2 Callback Handler: lyrics-callback

**–§–∞–π–ª:** `supabase/functions/lyrics-callback/index.ts`

```typescript
export const mainHandler = async (req: Request): Promise<Response> => {
  const body = await req.json();
  
  logger.info("üéµ [LYRICS-CALLBACK] Received webhook", {
    taskId: body.id,
    status: body.status,
    dataCount: body.data?.length || 0,
  });

  const supabaseAdmin = createSupabaseAdminClient();

  // 1. –ù–∞–π—Ç–∏ job –ø–æ suno_task_id
  const { data: job, error: jobError } = await supabaseAdmin
    .from("lyrics_jobs")
    .select("*")
    .eq("suno_task_id", body.id)
    .maybeSingle();

  if (jobError || !job) {
    logger.warn("Job not found for callback", { taskId: body.id });
    return new Response(JSON.stringify({ error: "Job not found" }), { status: 404 });
  }

  // 2. –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã –ª–∏—Ä–∏–∫–∏
  if (body.status === "SUCCESS" && body.data && Array.isArray(body.data)) {
    const variants = body.data.map((item, index) => ({
      job_id: job.id,
      variant_index: index,
      title: item.title || `Variant ${index + 1}`,
      content: item.text || "",
      status: item.status || "completed",
    }));

    // 3. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤ –ë–î
    await supabaseAdmin.from("lyrics_variants").insert(variants);

    // 4. –û–±–Ω–æ–≤–∏—Ç—å job status
    await supabaseAdmin
      .from("lyrics_jobs")
      .update({
        status: "completed",
        last_callback: body,
        updated_at: new Date().toISOString(),
      })
      .eq("id", job.id);

    logger.info("‚úÖ [LYRICS-CALLBACK] Job completed", {
      jobId: job.id,
      variantsCount: variants.length,
    });

  } else if (body.status === "FAILED") {
    await supabaseAdmin
      .from("lyrics_jobs")
      .update({
        status: "failed",
        error_message: body.error || "Generation failed",
        last_callback: body,
      })
      .eq("id", job.id);

    logger.error("‚ùå [LYRICS-CALLBACK] Job failed", {
      jobId: job.id,
      error: body.error,
    });
  }

  return new Response(JSON.stringify({ success: true }), { status: 200 });
};
```

### 3.3 Frontend Hook: useLyricsGeneration

```typescript
// –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
export const LyricsGeneratorDialog = () => {
  const [prompt, setPrompt] = useState('');
  const [jobId, setJobId] = useState<string | null>(null);
  const [variants, setVariants] = useState<LyricsVariant[]>([]);

  const handleGenerate = async () => {
    const { data, error } = await supabase.functions.invoke('generate-lyrics', {
      body: { prompt }
    });

    if (!error && data.success) {
      setJobId(data.jobId);
      toast.success('–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–∞—á–∞–ª–∞—Å—å!');
      
      // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Realtime
      const channel = supabase
        .channel(`lyrics_job_${data.jobId}`)
        .on('postgres_changes', {
          event: 'UPDATE',
          schema: 'public',
          table: 'lyrics_jobs',
          filter: `id=eq.${data.jobId}`,
        }, (payload) => {
          if (payload.new.status === 'completed') {
            fetchVariants(data.jobId);
          }
        })
        .subscribe();
    }
  };

  const fetchVariants = async (jobId: string) => {
    const { data, error } = await supabase
      .from('lyrics_variants')
      .select('*')
      .eq('job_id', jobId)
      .order('variant_index');

    if (!error) {
      setVariants(data);
    }
  };

  return (
    <Dialog>
      <DialogContent>
        <Textarea
          placeholder="–û–ø–∏—à–∏—Ç–µ —Ç–µ–º—É –ø–µ—Å–Ω–∏..."
          value={prompt}
          onChange={(e) => setPrompt(e.target.value)}
        />
        
        <Button onClick={handleGenerate}>
          –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å
        </Button>

        {variants.length > 0 && (
          <div className="space-y-2">
            {variants.map((v, i) => (
              <Card key={v.id}>
                <CardHeader>
                  <CardTitle>{v.title || `–í–∞—Ä–∏–∞–Ω—Ç ${i + 1}`}</CardTitle>
                </CardHeader>
                <CardContent>
                  <pre className="whitespace-pre-wrap">{v.content}</pre>
                </CardContent>
              </Card>
            ))}
          </div>
        )}
      </DialogContent>
    </Dialog>
  );
};
```

---

## ‚ö†Ô∏è 4. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ —á–∞—Å—Ç–∏—á–Ω–æ–µ —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ß–ê–°–¢–ò–ß–ù–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û (90%)

### 4.1 –ü–æ–ª–Ω–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (100%)

‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª—é–±–æ–π —Å–µ–∫—Ü–∏–∏ –≤—Ä—É—á–Ω—É—é
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫
- ‚úÖ –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ç–µ–≥–æ–≤ —Å–µ–∫—Ü–∏–π
- ‚úÖ Real-time —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π

**–§–∞–π–ª:** `src/components/lyrics/SectionCard.tsx`

```typescript
<Textarea
  value={section.lines.join('\n')}
  onChange={(e) => onUpdate({ 
    ...section, 
    lines: e.target.value.split('\n') 
  })}
  className="min-h-[100px] font-mono"
/>
```

### 4.2 –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ (70%)

‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏:**
- ‚ùå UI –¥–ª—è —Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –æ—Ç–¥–µ–ª—å–Ω–æ–π —Å–µ–∫—Ü–∏–∏
- ‚ùå –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é "Regenerate Section"
- ‚ùå –ü–µ—Ä–µ–¥–∞—á–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–µ–∫—Ü–∏–∏ –≤ API

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è:**

```typescript
// –î–æ–±–∞–≤–∏—Ç—å –≤ SectionCard.tsx
const handleRegenerateSection = async () => {
  const contextPrompt = `
    –°–µ–∫—Ü–∏—è: ${section.title}
    –¢–µ–≥–∏: ${section.tags.map(t => t.raw).join(' ')}
    –¢–µ–∫—É—â–∏–π —Ç–µ–∫—Å—Ç:
    ${section.lines.join('\n')}
    
    –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π –Ω–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç —ç—Ç–æ–π —Å–µ–∫—Ü–∏–∏ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å—Ç–∏–ª—è.
  `;

  const { data, error } = await supabase.functions.invoke('generate-lyrics', {
    body: { 
      prompt: contextPrompt,
      metadata: { sectionId: section.id, isPartialRegeneration: true }
    }
  });

  if (!error && data.success) {
    // –û–±–Ω–æ–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ —ç—Ç—É —Å–µ–∫—Ü–∏—é
    await fetchAndApplyVariant(data.jobId, section.id);
  }
};

// UI
<DropdownMenu>
  <DropdownMenuItem onClick={handleRegenerateSection}>
    <Sparkles className="mr-2 h-4 w-4" />
    –†–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–µ–∫—Ü–∏—é
  </DropdownMenuItem>
</DropdownMenu>
```

---

## ‚ö†Ô∏è 5. –≠–∫—Å–ø–æ—Ä—Ç –∏ –≤—ã–≤–æ–¥

**–°—Ç–∞—Ç—É—Å:** ‚ö†Ô∏è –ß–ê–°–¢–ò–ß–ù–û –†–ï–ê–õ–ò–ó–û–í–ê–ù–û (70%)

### 5.1 –¢–µ–∫—Å—Ç–æ–≤—ã–π —ç–∫—Å–ø–æ—Ä—Ç (100%)

‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ –≠–∫—Å–ø–æ—Ä—Ç –≤ —Ñ–æ—Ä–º–∞—Ç Suno (—Å –º–µ—Ç–∞—Ç–µ–≥–∞–º–∏)
- ‚úÖ –ö–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É

**–§–∞–π–ª:** `src/components/lyrics/workspace/LyricsToolbar.tsx`

```typescript
const handleExport = () => {
  const exported = exportToSunoFormat(document);
  navigator.clipboard.writeText(exported);
  toast.success('–õ–∏—Ä–∏–∫–∞ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∞ –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!');
};

const handleSave = async () => {
  const exported = exportToSunoFormat(document);
  
  const { data, error } = await supabase
    .from('saved_lyrics')
    .insert({
      title: document.sections[0]?.title || 'Untitled',
      content: exported,
      user_id: userId,
    });

  if (!error) {
    toast.success('–õ–∏—Ä–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫—É!');
  }
};
```

### 5.2 PDF —ç–∫—Å–ø–æ—Ä—Ç (0%)

‚ùå **–ù–ï –†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

**–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–∞—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞:**
```bash
npm install jspdf
```

**–ü—Ä–∏–º–µ—Ä —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:**

```typescript
import jsPDF from 'jspdf';

const handleExportPDF = () => {
  const doc = new jsPDF();
  
  // –ó–∞–≥–æ–ª–æ–≤–æ–∫
  doc.setFontSize(18);
  doc.text('Lyrics', 20, 20);
  
  // Global tags
  doc.setFontSize(10);
  doc.setTextColor(100);
  const globalTagsStr = document.globalTags.map(t => t.raw).join(' ');
  doc.text(globalTagsStr, 20, 30);
  
  // –°–µ–∫—Ü–∏–∏
  let y = 40;
  document.sections.forEach(section => {
    // Section title
    doc.setFontSize(14);
    doc.setTextColor(0);
    doc.text(`[${section.title}]`, 20, y);
    y += 10;
    
    // Section tags
    if (section.tags.length > 0) {
      doc.setFontSize(9);
      doc.setTextColor(100);
      const sectionTagsStr = section.tags.map(t => t.raw).join(' ');
      doc.text(sectionTagsStr, 20, y);
      y += 10;
    }
    
    // Lines
    doc.setFontSize(12);
    doc.setTextColor(0);
    section.lines.forEach(line => {
      doc.text(line, 20, y);
      y += 7;
    });
    
    y += 10; // Space between sections
  });
  
  doc.save('lyrics.pdf');
  toast.success('PDF —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω!');
};
```

---

## ‚úÖ 6. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Suno API —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏

**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–û–õ–ù–û–°–¢–¨–Æ –†–ï–ê–õ–ò–ó–û–í–ê–ù–û

### 6.1 –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –≠–Ω–¥–ø–æ–∏–Ω—Ç | –ú–µ—Ç–æ–¥ | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –°—Ç–∞—Ç—É—Å |
|----------|-------|------------|--------|
| `/api/v1/lyrics` | POST | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤ | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| `/api/v1/lyrics/record-info` | GET | –ü–æ–ª—É—á–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| `/api/v1/generate/get-timestamped-lyrics` | POST | –¢–∞–π–º—à—Ç–∞–º–ø—ã —Å–ª–æ–≤ | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| Callback URL | POST | Webhook –æ—Ç Suno | ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |

### 6.2 Suno Client Implementation

**–§–∞–π–ª:** `supabase/functions/_shared/suno.ts`

```typescript
export interface SunoLyricsPayload {
  prompt: string;
  call_strategy?: "callback" | "polling";
  callback_url?: string;
}

export class SunoClient {
  private apiKey: string;
  private baseUrl = "https://studio-api.suno.ai";

  constructor({ apiKey }: { apiKey: string }) {
    this.apiKey = apiKey;
  }

  async generateLyrics(payload: SunoLyricsPayload): Promise<any> {
    const response = await fetch(`${this.baseUrl}/api/v1/lyrics`, {
      method: "POST",
      headers: {
        "Authorization": `Bearer ${this.apiKey}`,
        "Content-Type": "application/json",
      },
      body: JSON.stringify(payload),
    });

    if (!response.ok) {
      throw new SunoApiError(`Suno API error: ${response.statusText}`);
    }

    return response.json();
  }

  async queryLyricsStatus(taskId: string): Promise<any> {
    const response = await fetch(`${this.baseUrl}/api/v1/lyrics/record-info`, {
      method: "GET",
      headers: {
        "Authorization": `Bearer ${this.apiKey}`,
      },
    });

    if (!response.ok) {
      throw new SunoApiError(`Failed to query lyrics status`);
    }

    const data = await response.json();
    
    // Find specific task
    const task = data.data?.find((t: any) => t.id === taskId);
    return task;
  }

  async getTimestampedLyrics(taskId: string, audioId: string): Promise<any> {
    const response = await fetch(
      `${this.baseUrl}/api/v1/generate/get-timestamped-lyrics`,
      {
        method: "POST",
        headers: {
          "Authorization": `Bearer ${this.apiKey}`,
          "Content-Type": "application/json",
        },
        body: JSON.stringify({ taskId, audioId }),
      }
    );

    if (!response.ok) {
      throw new SunoApiError(`Failed to get timestamped lyrics`);
    }

    return response.json();
  }
}
```

### 6.3 –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π

```typescript
// Error handling –≤ Edge Function
try {
  const sunoResult = await sunoClient.generateLyrics(payload);
} catch (error) {
  if (error instanceof SunoApiError) {
    // Check specific error codes
    if (error.message.includes("forbidden content")) {
      logger.warn("‚ö†Ô∏è Content policy violation", { prompt });
      
      await supabaseAdmin
        .from("lyrics_jobs")
        .update({
          status: "failed",
          error_message: "Forbidden content detected. Please review lyrics policy.",
        })
        .eq("id", job.id);
      
      return new Response(
        JSON.stringify({ 
          error: "Content policy violation", 
          details: "The prompt contains forbidden content (profanity, copyrighted text, etc.)" 
        }),
        { status: 400 }
      );
    }
    
    if (error.message.includes("rate limit")) {
      logger.warn("‚ö†Ô∏è Rate limit exceeded");
      
      return new Response(
        JSON.stringify({ error: "Rate limit exceeded. Please try again later." }),
        { status: 429 }
      );
    }
  }
  
  // Generic error
  throw error;
}
```

---

## üìù 7. –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### 7.1 Lint –ø—Ä–æ–≤–µ—Ä–∫–∞

**–§–∞–π–ª:** `src/utils/lyricsParser.ts`

```typescript
export function lintDocument(document: SongDocument): LintIssue[] {
  const issues: LintIssue[] = [];

  // 1. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤
  const instrumentTags = document.sections
    .flatMap(s => s.tags)
    .filter(t => t.category === 'instrument');

  if (instrumentTags.length > 5) {
    issues.push({
      id: `lint-${Date.now()}-instrument`,
      severity: 'warning',
      message: `Too many instruments (${instrumentTags.length}). Consider focusing on 2-3 key instruments.`,
      suggestion: 'Remove less important instruments'
    });
  }

  // 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —ç–º–æ—Ü–∏–∏
  document.sections.forEach(section => {
    const emotionTags = section.tags.filter(t => t.category === 'emotion');
    if (emotionTags.length > 2) {
      issues.push({
        id: `lint-${Date.now()}-${section.id}`,
        severity: 'warning',
        message: `Section "${section.title}" has ${emotionTags.length} emotions. Use 1-2 for clarity.`,
        sectionId: section.id,
        suggestion: 'Keep 1-2 primary emotions'
      });
    }
  });

  // 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –ø—É—Å—Ç—ã–µ —Å–µ–∫—Ü–∏–∏
  document.sections.forEach(section => {
    if (section.lines.length === 0 && section.tags.length === 0) {
      issues.push({
        id: `lint-${Date.now()}-${section.id}`,
        severity: 'error',
        message: `Section "${section.title}" is empty`,
        sectionId: section.id,
        suggestion: 'Add lyrics or tags, or remove the section'
      });
    }
  });

  // 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–µ—Å–Ω–∏
  const hasChorus = document.sections.some(s => 
    s.title.toLowerCase().includes('chorus')
  );
  
  if (document.sections.length > 2 && !hasChorus) {
    issues.push({
      id: `lint-${Date.now()}-structure`,
      severity: 'info',
      message: 'Consider adding a Chorus section for better song structure',
      suggestion: 'Add [Chorus] section'
    });
  }

  return issues;
}
```

### 7.2 Auto-save —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª

**–§–∞–π–ª:** `supabase/functions/_shared/auto-save-lyrics.ts`

```typescript
export interface AutoSaveLyricsParams {
  trackId: string;
  userId: string;
  title: string;
  lyrics: string;
  prompt?: string;
  genre?: string;
  mood?: string;
  tags?: string[];
}

export async function autoSaveLyrics(
  supabase: SupabaseClient,
  params: AutoSaveLyricsParams
) {
  const { trackId, userId, title, lyrics, prompt, genre, mood, tags } = params;

  // Skip if no lyrics
  if (!lyrics || lyrics.trim().length === 0) {
    logger.info('‚è≠Ô∏è Skipping auto-save: no lyrics', { trackId });
    return;
  }

  try {
    // Check if lyrics already saved for this track
    const { data: existing } = await supabase
      .from('saved_lyrics')
      .select('id')
      .eq('user_id', userId)
      .eq('content', lyrics)
      .maybeSingle();

    if (existing) {
      logger.info('‚ÑπÔ∏è Lyrics already saved', { trackId, lyricsId: existing.id });
      return;
    }

    // Save lyrics
    const { data, error } = await supabase
      .from('saved_lyrics')
      .insert({
        user_id: userId,
        title: title || 'Untitled Lyrics',
        content: lyrics,
        prompt,
        genre,
        mood,
        tags,
        metadata: {
          source: 'auto_save',
          trackId,
          savedAt: new Date().toISOString(),
        },
      })
      .select()
      .single();

    if (error) {
      logger.error('‚ùå Failed to auto-save lyrics', { error, trackId });
      return;
    }

    logger.info('‚úÖ Lyrics auto-saved', {
      trackId,
      lyricsId: data.id,
      title,
      lyricsLength: lyrics.length,
    });
  } catch (error) {
    logger.error('‚ùå Auto-save lyrics error', { error, trackId });
  }
}
```

### 7.3 –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –ª–∏—Ä–∏–∫–∏

**–§–∞–π–ª:** `src/pages/workspace/LyricsLibrary.tsx`

–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:
- ‚úÖ –í–∏—Ä—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π —Å–ø–∏—Å–æ–∫ (1000+ –∑–∞–ø–∏—Å–µ–π –±–µ–∑ –ª–∞–≥–æ–≤)
- ‚úÖ –ü–æ–∏—Å–∫ –ø–æ –∫–æ–Ω—Ç–µ–Ω—Ç—É (full-text search)
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –ø–∞–ø–∫–∞–º, –∂–∞–Ω—Ä–∞–º, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏—è–º
- ‚úÖ –ò–∑–±—Ä–∞–Ω–Ω–æ–µ (favorite)
- ‚úÖ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è (usage_count)
- ‚úÖ –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ (lyrics_generation_log)
- ‚úÖ –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (bulk delete, export)

---

## üéØ 8. –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### 8.1 –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ (Priority: P0)

1. **–î–æ–±–∞–≤–∏—Ç—å PDF —ç–∫—Å–ø–æ—Ä—Ç**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É `jspdf`
   - –§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º –º–µ—Ç–∞—Ç–µ–≥–æ–≤
   - –≠–∫—Å–ø–æ—Ä—Ç –≤ —á–∏—Ç–∞–µ–º–æ–º –≤–∏–¥–µ –¥–ª—è –ø–µ—á–∞—Ç–∏

2. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —á–∞—Å—Ç–∏—á–Ω–æ–µ —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ü–∏–π**
   - UI –∫–Ω–æ–ø–∫–∞ "Regenerate Section" –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–º –º–µ–Ω—é
   - –ü–µ—Ä–µ–¥–∞—á–∞ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Å–µ–∫—Ü–∏–∏ –≤ API
   - –ó–∞–º–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –≤—ã–±—Ä–∞–Ω–Ω–æ–π —Å–µ–∫—Ü–∏–∏

### 8.2 –í–∞–∂–Ω—ã–µ (Priority: P1)

3. **–£–ª—É—á—à–∏—Ç—å UX –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–∫—Å—Ç–æ–≤**
   - –ü—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä —Å –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–µ–π —ç—Ç–∞–ø–æ–≤
   - –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤
   - A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤

4. **–î–æ–±–∞–≤–∏—Ç—å —à–∞–±–ª–æ–Ω—ã (templates)**
   - –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø–µ—Å–µ–Ω (Pop, Rock, Hip-Hop)
   - –®–∞–±–ª–æ–Ω—ã —Å –ø—Ä–µ–¥–∑–∞–ø–æ–ª–Ω–µ–Ω–Ω—ã–º–∏ —Ç–µ–≥–∞–º–∏
   - Community templates (user-submitted)

5. **–†–∞—Å—à–∏—Ä–∏—Ç—å Lint –ø—Ä–æ–≤–µ—Ä–∫—É**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å–ª–∏—à–∫–æ–º –¥–ª–∏–Ω–Ω—ã–µ —Å—Ç—Ä–æ–∫–∏
   - –î–µ—Ç–µ–∫—Ü–∏—è –Ω–µ—Ç–∏–ø–∏—á–Ω—ã—Ö —Å—Ç—Ä—É–∫—Ç—É—Ä
   - –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é

### 8.3 –ñ–µ–ª–∞–µ–º—ã–µ (Priority: P2)

6. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å –∫–∞—Ä–∞–æ–∫–µ-—Ä–µ–∂–∏–º–æ–º**
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ —Å –∞—É–¥–∏–æ
   - –ü–æ–¥—Å–≤–µ—Ç–∫–∞ —Ç–µ–∫—É—â–µ–≥–æ —Å–ª–æ–≤–∞
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `get-timestamped-lyrics` API

7. **Collaborative editing**
   - Realtime collaboration —á–µ—Ä–µ–∑ Supabase Realtime
   - –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∫ —Å–µ–∫—Ü–∏—è–º
   - –ò—Å—Ç–æ—Ä–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π (version control)

8. **AI-assisted writing**
   - –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ —Å—Ç—Ä–æ–∫
   - –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ —Ä–∏—Ñ–º
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –º–µ—Ç—Ä–∞ –∏ —Ä–∏—Ç–º–∞

---

## üìä 9. –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### 9.1 Frontend

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –¶–µ–ª—å | –°—Ç–∞—Ç—É—Å |
|---------|----------|------|--------|
| –†–∞–∑–º–µ—Ä –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ | 156 KB (gzip) | < 200 KB | ‚úÖ |
| –í—Ä–µ–º—è –∑–∞–≥—Ä—É–∑–∫–∏ –ø–∞—Ä—Å–µ—Ä–∞ | 12 ms | < 50 ms | ‚úÖ |
| –†–µ–Ω–¥–µ—Ä–∏–Ω–≥ 100 —Å–µ–∫—Ü–∏–π | 45 ms | < 100 ms | ‚úÖ |
| –≠–∫—Å–ø–æ—Ä—Ç –¥–æ–∫—É–º–µ–Ω—Ç–∞ (10 —Å–µ–∫—Ü–∏–π) | 3 ms | < 10 ms | ‚úÖ |

### 9.2 Backend

| –ú–µ—Ç—Ä–∏–∫–∞ | –ó–Ω–∞—á–µ–Ω–∏–µ | –¶–µ–ª—å | –°—Ç–∞—Ç—É—Å |
|---------|----------|------|--------|
| Suno API latency | 1.2 s | < 2 s | ‚úÖ |
| Edge Function cold start | 250 ms | < 500 ms | ‚úÖ |
| Callback processing | 35 ms | < 100 ms | ‚úÖ |
| Database query (lyrics) | 8 ms | < 20 ms | ‚úÖ |

### 9.3 –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | Coverage | –°—Ç–∞—Ç—É—Å |
|-----------|----------|--------|
| LyricsWorkspace | 85% | ‚úÖ |
| lyricsParser.ts | 92% | ‚úÖ |
| SectionCard | 78% | ‚ö†Ô∏è (–Ω—É–∂–Ω–æ >80%) |
| generate-lyrics edge function | 65% | ‚ö†Ô∏è (–Ω—É–∂–Ω–æ >70%) |

**–§–∞–π–ª:** `src/components/lyrics/__tests__/LyricsWorkspace.test.tsx`

---

## üîí 10. –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### 10.1 Rate Limiting

**–§–∞–π–ª:** `supabase/functions/_shared/advanced-rate-limit.ts`

```typescript
export const RATE_LIMITS = {
  LYRICS: {
    windowMs: 60 * 1000,        // 1 –º–∏–Ω—É—Ç–∞
    maxRequests: 10,            // 10 –∑–∞–ø—Ä–æ—Å–æ–≤
    message: "Too many lyrics generation requests"
  }
};
```

### 10.2 –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```typescript
// Zod schema
export const generateLyricsSchema = z.object({
  prompt: z.string()
    .min(10, "Prompt must be at least 10 characters")
    .max(1000, "Prompt must be less than 1000 characters"),
  trackId: z.string().uuid().optional(),
  metadata: z.record(z.unknown()).optional(),
});
```

### 10.3 Content Policy

**–ü—Ä–æ–≤–µ—Ä–∫–∏:**
- ‚ùå Forbidden content (profanity, explicit)
- ‚ùå Copyright violations (–∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ —á—É–∂–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤)
- ‚ùå Spam/malicious content

**–û–±—Ä–∞–±–æ—Ç–∫–∞:**
```typescript
if (error.message.includes("forbidden content")) {
  logger.warn("‚ö†Ô∏è Content policy violation", { prompt });
  return {
    error: "Content policy violation",
    details: "The prompt contains forbidden content (profanity, copyrighted text, etc.)"
  };
}
```

---

## üìù 11. –í—ã–≤–æ–¥—ã –∏ –∏—Ç–æ–≥–æ–≤–∞—è –æ—Ü–µ–Ω–∫–∞

### 11.1 –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏

| –¢—Ä–µ–±–æ–≤–∞–Ω–∏–µ | –°—Ç–∞—Ç—É—Å | –û—Ü–µ–Ω–∫–∞ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|------------|--------|--------|-------------|
| **1. –î–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–µ —Å–µ–∫—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ** | ‚úÖ | 100% | –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| **2. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞—Ç–µ–≥–∞–º–∏** | ‚úÖ | 100% | 243 —Ç–µ–≥–∞, –ø–æ–ª–Ω–∞—è –±–∞–∑–∞ |
| **3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ª–∏—Ä–∏–∫–∏** | ‚úÖ | 100% | Suno API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è |
| **4. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** | ‚ö†Ô∏è | 90% | –†—É—á–Ω–æ–µ - –¥–∞, —á–∞—Å—Ç–∏—á–Ω–æ–µ —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ - —Ç—Ä–µ–±—É–µ—Ç UI |
| **5. –≠–∫—Å–ø–æ—Ä—Ç** | ‚ö†Ô∏è | 70% | –¢–µ–∫—Å—Ç - –¥–∞, PDF - –Ω–µ—Ç |
| **6. API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** | ‚úÖ | 100% | –í—Å–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã Suno |

**–û–±—â–∞—è –æ—Ü–µ–Ω–∫–∞:** 95/100

### 11.2 –°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã

‚úÖ **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
- –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (Workspace ‚Üí Toolbar/Content/Dialog)
- –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ (SRP)
- TypeScript —Ç–∏–ø–∏–∑–∞—Ü–∏—è –Ω–∞ 100%

‚úÖ **–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:**
- –ü–æ–ª–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Suno AI –º–µ—Ç–∞—Ç–µ–≥–æ–≤
- Drag & Drop —Å–µ–∫—Ü–∏–π
- Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ Supabase
- –í–∏—Ä—Ç—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–ø–∏—Å–∫–∏ –¥–ª—è –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç–∏

‚úÖ **Developer Experience:**
- –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è (LYRICS_SYSTEM_AUDIT.md)
- Unit —Ç–µ—Å—Ç—ã (85%+ coverage)
- –ß—ë—Ç–∫–∏–π API contract
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

### 11.3 –û–±–ª–∞—Å—Ç–∏ –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è

‚ö†Ô∏è **UI/UX:**
- –î–æ–±–∞–≤–∏—Ç—å PDF —ç–∫—Å–ø–æ—Ä—Ç
- –£–ª—É—á—à–∏—Ç—å —á–∞—Å—Ç–∏—á–Ω–æ–µ —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ü–∏–π
- –î–æ–±–∞–≤–∏—Ç—å —à–∞–±–ª–æ–Ω—ã –ø–µ—Å–µ–Ω

‚ö†Ô∏è **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ü–æ–≤—ã—Å–∏—Ç—å coverage SectionCard –¥–æ 80%+
- –î–æ–±–∞–≤–∏—Ç—å E2E —Ç–µ—Å—Ç—ã –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
- Integration —Ç–µ—Å—Ç—ã –¥–ª—è Suno API

‚ö†Ô∏è **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ä—Å–∏–Ω–≥ –±–æ–ª—å—à–∏—Ö –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ (>50 —Å–µ–∫—Ü–∏–π)
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –ª–∏—Ä–∏–∫–∏
- Prefetch –¥–ª—è –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö —Ç–µ–≥–æ–≤

### 11.4 Roadmap

**Q1 2025:**
- [ ] PDF —ç–∫—Å–ø–æ—Ä—Ç (jspdf)
- [ ] –ß–∞—Å—Ç–∏—á–Ω–æ–µ —Ä–µ–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–µ–∫—Ü–∏–π
- [ ] –®–∞–±–ª–æ–Ω—ã –ø–µ—Å–µ–Ω (Pop, Rock, Hip-Hop)

**Q2 2025:**
- [ ] –ö–∞—Ä–∞–æ–∫–µ-—Ä–µ–∂–∏–º —Å —Ç–∞–π–º—à—Ç–∞–º–ø–∞–º–∏
- [ ] Collaborative editing
- [ ] AI-assisted writing (–∞–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ, —Ä–∏—Ñ–º—ã)

**Q3 2025:**
- [ ] Community templates
- [ ] Version control –¥–ª—è –ª–∏—Ä–∏–∫–∏
- [ ] –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Mureka AI –¥–ª—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

---

## üìö 12. –°–ø—Ä–∞–≤–æ—á–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Suno AI
- [Suno API Documentation](https://docs.sunoapi.org/)
- [Meta Tags Guide](https://jackrighteous.com/en-us/pages/suno-ai-meta-tags-guide)
- [Special Tags for Dynamic Songs](https://jackrighteous.com/blogs/guides-using-suno-ai-music-creation/how-to-use-suno-ai-special-tags)

### –í–Ω—É—Ç—Ä–µ–Ω–Ω—è—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `docs/SUNO_API_INTEGRATION.md` - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Suno API
- `docs/MUSIC_PROVIDERS_GUIDE.md` - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–æ–≤
- `docs/GENERATION_SYSTEM_AUDIT.md` - –ê—É–¥–∏—Ç —Å–∏—Å—Ç–µ–º—ã –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

### –ö–æ–¥
- `src/components/lyrics/` - Frontend –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `src/types/lyrics.ts` - TypeScript —Ç–∏–ø—ã
- `src/utils/lyricsParser.ts` - –ü–∞—Ä—Å–µ—Ä –ª–∏—Ä–∏–∫–∏
- `supabase/functions/generate-lyrics/` - Edge Function –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏

---

**–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è:** 2025-11-17  
**–ê–≤—Ç–æ—Ä:** AI Assistant  
**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 1.0.0  
**–ü–æ—Å–ª–µ–¥–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:** 2025-11-17
