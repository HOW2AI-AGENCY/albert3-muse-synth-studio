# üîç –ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –ê—É–¥–∏—Ç –ü—Ä–æ–µ–∫—Ç–∞ Albert3 Muse Synth Studio

**–î–∞—Ç–∞:** 2025-11-06
**–í–µ—Ä—Å–∏—è:** 3.0.0
**–¢–∏–ø:** –ü–æ–ª–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞—É–¥–∏—Ç —Å –ø–ª–∞–Ω–æ–º –¥–æ—Ä–∞–±–æ—Ç–æ–∫
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ó–ê–í–ï–†–®–ï–ù

---

## üìã Executive Summary

–ü—Ä–æ–≤–µ–¥–µ–Ω –ø–æ–ª–Ω—ã–π –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∞—É–¥–∏—Ç –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã AI-–≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º—É–∑—ã–∫–∏, –≤–∫–ª—é—á–∞—é—â–∏–π:
- ‚úÖ –ê–Ω–∞–ª–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ –∏ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã
- ‚úÖ –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ —Å–µ—Ä–≤–∏—Å–∞–º–∏ (Suno AI, Mureka)
- ‚úÖ UI/UX –∏ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- ‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫

### –û–±—â–∞—è –û—Ü–µ–Ω–∫–∞: **8.2/10** ‚úÖ –•–û–†–û–®–û

| –ö–∞—Ç–µ–≥–æ—Ä–∏—è | –û—Ü–µ–Ω–∫–∞ | –°—Ç–∞—Ç—É—Å |
|-----------|--------|--------|
| **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞** | 8.5/10 | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞** | 7.8/10 | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ |
| **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** | 6.8/10 | ‚ö†Ô∏è –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã |
| **UI/UX** | 8.4/10 | ‚úÖ –•–æ—Ä–æ—à–æ |
| **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** | 8.5/10 | ‚úÖ –û—Ç–ª–∏—á–Ω–æ |
| **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å** | 7.2/10 | ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏–π |

---

## üìä –ß–ê–°–¢–¨ 1: –°–¢–†–£–ö–¢–£–†–ê –ü–†–û–ï–ö–¢–ê –ò –ê–†–•–ò–¢–ï–ö–¢–£–†–ê

### 1.1 –û–±—â–∞—è –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

```
Frontend (src/):
‚îú‚îÄ‚îÄ –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:              270+ —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ –•—É–∫–æ–≤:                    90+ —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ Stores (Zustand):         5 —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ –ö–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ (React):       5 —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ –°–µ—Ä–≤–∏—Å–æ–≤:                 9+ —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ –°—Ç—Ä–æ–∫ –∫–æ–¥–∞:               ~36,000
‚îî‚îÄ‚îÄ shadcn/ui –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:    71

Backend (supabase/):
‚îú‚îÄ‚îÄ Edge Functions:           80 —Ñ—É–Ω–∫—Ü–∏–π
‚îú‚îÄ‚îÄ Shared –º–æ–¥—É–ª–∏:            40 –º–æ–¥—É–ª–µ–π
‚îú‚îÄ‚îÄ –ú–∏–≥—Ä–∞—Ü–∏–π:                 20+ —Ñ–∞–π–ª–æ–≤
‚îî‚îÄ‚îÄ –°—Ç—Ä–æ–∫ –∫–æ–¥–∞:               ~15,000

–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:
‚îú‚îÄ‚îÄ Unit —Ç–µ—Å—Ç–æ–≤:              50+ —Ñ–∞–π–ª–æ–≤
‚îú‚îÄ‚îÄ E2E —Ç–µ—Å—Ç–æ–≤ (Playwright):  10+ —Ñ–∞–π–ª–æ–≤
‚îî‚îÄ‚îÄ –ü–æ–∫—Ä—ã—Ç–∏–µ:                 ~60%
```

### 1.2 –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –ü–∞—Ç—Ç–µ—Ä–Ω—ã ‚úÖ

**Provider Pattern (8.5/10):**
- ‚úÖ –û—Ç–ª–∏—á–Ω–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è Factory —Å Singleton –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ–º
- ‚úÖ –ß–µ—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –∞–¥–∞–ø—Ç–µ—Ä–æ–≤ –¥–ª—è Suno –∏ Mureka
- ‚úÖ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `IProviderClient`
- ‚ö†Ô∏è –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç timeout –æ–±—Ä–∞–±–æ—Ç–∫–∞
- ‚ö†Ô∏è –ù–µ—Ç –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–≥–æ retry –º–µ—Ö–∞–Ω–∏–∑–º–∞

**Repository Pattern (8/10):**
- ‚úÖ –•–æ—Ä–æ—à–∞—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –¥–∞–Ω–Ω—ã–º–∏
- ‚úÖ `SupabaseTrackRepository` —Ä–µ–∞–ª–∏–∑—É–µ—Ç `ITrackRepository`
- ‚ö†Ô∏è N+1 –∑–∞–ø—Ä–æ—Å—ã –≤ `incrementPlayCount` –∏ `incrementLikeCount`

**State Management (9/10):**
- ‚úÖ Zustand –¥–ª—è audio player (98% —Å–Ω–∏–∂–µ–Ω–∏–µ —Ä–µ-—Ä–µ–Ω–¥–µ—Ä–æ–≤)
- ‚úÖ React Query –¥–ª—è server state
- ‚úÖ Context API –¥–ª—è Auth, Projects, StemMixer
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ selectors

### 1.3 –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ü—Ä–æ–±–ª–µ–º—ã –°—Ç—Ä—É–∫—Ç—É—Ä—ã üî¥

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è:

**1. AudioUpload –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (3 –≤–µ—Ä—Å–∏–∏):**
- `/src/components/audio/AudioUpload.tsx`
- `/src/components/audio/AudioUploader.tsx`
- `/src/components/generator/AudioUploader.tsx`

**–†–µ—à–µ–Ω–∏–µ:** –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–π `AudioUploader` —Å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä—É–µ–º—ã–º API

**2. ErrorBoundary –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (5 –≤–µ—Ä—Å–∏–π):**
- `/src/components/ErrorBoundary.tsx`
- `/src/components/error/ErrorBoundary.tsx`
- `/src/components/errors/GlobalErrorBoundary.tsx`
- `/src/components/errors/EnhancedErrorBoundary.tsx`
- `/src/components/ui/error-boundary.tsx`

**–†–µ—à–µ–Ω–∏–µ:** –ö–æ–Ω—Å–æ–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –≤ –µ–¥–∏–Ω—É—é –∏–µ—Ä–∞—Ä—Ö–∏—é –≤ `/src/components/error/`

**3. TrackList –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã (4 –≤–µ—Ä—Å–∏–∏):**
- `/src/components/TracksList.tsx`
- `/src/components/OptimizedTrackList.tsx`
- `/src/components/tracks/VirtualizedTrackList.tsx`
- `/src/components/tracks/VirtualizedTracksList.tsx`

**–†–µ—à–µ–Ω–∏–µ:** –£—Ç–æ—á–Ω–∏—Ç—å —Ä–∞–∑–ª–∏—á–∏—è, —É–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏

---

## üéØ –ß–ê–°–¢–¨ 2: –õ–û–ì–ò–ö–ê –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø –ò –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨–°–ö–ò–ï –°–¶–ï–ù–ê–†–ò–ò

### 2.1 –ö–∞—Ä—Ç–∞ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –°—Ü–µ–Ω–∞—Ä–∏–µ–≤

#### –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ú—É–∑—ã–∫–∏ (–û—Å–Ω–æ–≤–Ω–æ–π) üéµ

```mermaid
graph TB
    A[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å] --> B[–û—Ç–∫—Ä—ã–≤–∞–µ—Ç Generator]
    B --> C{–í—ã–±–æ—Ä —Ä–µ–∂–∏–º–∞}
    C -->|Simple| D[–í–≤–æ–¥–∏—Ç –ø—Ä–æ–º–ø—Ç]
    C -->|Advanced| E[–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã]
    D --> F[–í—ã–±–∏—Ä–∞–µ—Ç —Å—Ç–∏–ª—å/—Ç–µ–≥–∏]
    E --> F
    F --> G[–ù–∞–∂–∏–º–∞–µ—Ç Generate]
    G --> H{Rate Limit Check}
    H -->|Allowed| I[Edge Function: generate-suno/mureka]
    H -->|Denied| J[–ü–æ–∫–∞–∑–∞—Ç—å –æ—à–∏–±–∫—É]
    I --> K[AI Processing 30-60 —Å–µ–∫]
    K --> L[Webhook Callback]
    L --> M[DB Update: status=completed]
    M --> N[Realtime Update ‚Üí Frontend]
    N --> O[Toast: –£—Å–ø–µ—à–Ω–æ]
    O --> P[Track –¥–æ–±–∞–≤–ª–µ–Ω –≤ Library]
    P --> Q[–ê–≤—Ç–æ–ø–ª–µ–π / –ü–æ–∫–∞–∑–∞—Ç—å –≤ —Å–ø–∏—Å–∫–µ]
```

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 30-60 —Å–µ–∫—É–Ω–¥
**–ß–∞—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:** üî• –û–ß–ï–ù–¨ –í–´–°–û–ö–ê–Ø (–æ—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª)
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0 - –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
- Rate limit: 10 –≥–µ–Ω–µ—Ä–∞—Ü–∏–π –≤ 1 —á–∞—Å –¥–ª—è free user
- –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –¥–ª–∏–Ω–∞ –ø—Ä–æ–º–ø—Ç–∞: 3000 —Å–∏–º–≤–æ–ª–æ–≤
- –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è: prompt –ò–õ–ò lyrics + tags
- Custom mode —Ç—Ä–µ–±—É–µ—Ç vocals=true
- Timeout: 10 –º–∏–Ω—É—Ç, –∑–∞—Ç–µ–º polling –æ—Ç–∫–ª—é—á–∞–µ—Ç—Å—è

**–°–æ—Å—Ç–æ—è–Ω–∏—è track:**
```typescript
type TrackStatus =
  | 'pending'      // –¢–æ–ª—å–∫–æ —Å–æ–∑–¥–∞–Ω –≤ DB
  | 'processing'   // –û—Ç–ø—Ä–∞–≤–ª–µ–Ω –≤ Suno/Mureka
  | 'completed'    // –ì–æ—Ç–æ–≤, audio_url –µ—Å—Ç—å
  | 'failed'       // –û—à–∏–±–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏
  | 'queued'       // –í –æ—á–µ—Ä–µ–¥–∏ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞
```

#### –°—Ü–µ–Ω–∞—Ä–∏–π 2: –í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ –ú—É–∑—ã–∫–∏ üéß

```mermaid
graph LR
    A[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å] --> B[–ö–ª–∏–∫ –Ω–∞ —Ç—Ä–µ–∫]
    B --> C{–ó–∞–≥—Ä—É–∂–µ–Ω?}
    C -->|–ù–µ—Ç| D[–ó–∞–≥—Ä—É–∑–∫–∞ audio_url]
    C -->|–î–∞| E[–ù–∞—á–∞–ª–æ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è]
    D --> E
    E --> F[audioPlayerStore.play]
    F --> G[–û–±–Ω–æ–≤–∏—Ç—å UI: playing=true]
    G --> H[–ü–æ–∫–∞–∑–∞—Ç—å GlobalAudioPlayer]
    H --> I{Desktop?}
    I -->|–î–∞| J[DesktopPlayerLayout]
    I -->|–ù–µ—Ç| K[MiniPlayer]
    J --> L[–û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Ç–µ–∫—Å—Ç–∞ / Progress]
    K --> L
    L --> M[incrementPlayCount]
```

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** <1 —Å–µ–∫—É–Ω–¥–∞
**–ß–∞—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:** üî• –û–ß–ï–ù–¨ –í–´–°–û–ö–ê–Ø
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P0 - –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
- –û–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –∏–≥—Ä–∞–µ—Ç —Ç–æ–ª—å–∫–æ 1 —Ç—Ä–µ–∫
- –ü—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –Ω–æ–≤—ã–π - –ø—Ä–µ–¥—ã–¥—É—â–∏–π –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É –µ—Å–ª–∏ queue –Ω–µ –ø—É—Å—Ç
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ –≤ localStorage

#### –°—Ü–µ–Ω–∞—Ä–∏–π 3: Extend Track / Create Cover üîÑ

```mermaid
graph TB
    A[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å] --> B[–ö–ª–∏–∫ Extend/Cover]
    B --> C[–û—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –¥–∏–∞–ª–æ–≥]
    C --> D[–í—ã–±–∏—Ä–∞–µ—Ç master version]
    D --> E{–¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏}
    E -->|Extend| F[–î–æ–±–∞–≤–ª—è–µ—Ç continuation prompt]
    E -->|Cover| G[–í—ã–±–∏—Ä–∞–µ—Ç –Ω–æ–≤—ã–π —Å—Ç–∏–ª—å]
    F --> H[generate-suno: extend]
    G --> I[generate-suno: cover]
    H --> J[Webhook ‚Üí –°–æ–∑–¥–∞–Ω–∏–µ track_version]
    I --> J
    J --> K[–°–≤—è–∑—ã–≤–∞–Ω–∏–µ —Å parent_track_id]
    K --> L[–ü–æ–∫–∞–∑–∞—Ç—å –≤ Versions tab]
```

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 30-60 —Å–µ–∫—É–Ω–¥
**–ß–∞—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:** üî∏ –°–†–ï–î–ù–Ø–Ø
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P1 - –í–´–°–û–ö–ò–ô

**–ë–∏–∑–Ω–µ—Å-–ø—Ä–∞–≤–∏–ª–∞:**
- –¢–æ–ª—å–∫–æ –¥–ª—è completed —Ç—Ä–µ–∫–æ–≤
- Extend: –¥–æ–±–∞–≤–ª—è–µ—Ç +2-4 —Å–µ–∫—É–Ω–¥—ã
- Cover: —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É, –º–µ–Ω—è–µ—Ç —Å—Ç–∏–ª—å
- –•—Ä–∞–Ω–∏—Ç—Å—è –≤ `track_versions` —Å `parent_track_id`

#### –°—Ü–µ–Ω–∞—Ä–∏–π 4: Lyrics Management üìù

```
User Journey:
1. –û—Ç–∫—Ä—ã—Ç—å Lyrics Library
2. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –ª–∏—Ä–∏–∫—É (manual / AI generate)
3. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É (Verse, Chorus, Bridge)
4. –î–æ–±–∞–≤–∏—Ç—å —Ç–µ–≥–∏ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
5. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ lyrics_library
6. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–µ
```

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 2-5 –º–∏–Ω—É—Ç
**–ß–∞—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:** üî∏ –°–†–ï–î–ù–Ø–Ø
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P1 - –í–´–°–û–ö–ò–ô

#### –°—Ü–µ–Ω–∞—Ä–∏–π 5: Stem Separation üéõÔ∏è

```
User Journey:
1. –í—ã–±—Ä–∞—Ç—å completed track
2. –ö–ª–∏–∫ "Separate Stems"
3. Edge Function: separate-stems ‚Üí Replicate API
4. –û–±—Ä–∞–±–æ—Ç–∫–∞: 2-5 –º–∏–Ω—É—Ç
5. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ stems (vocals, drums, bass, other)
6. –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ Stem Mixer
7. –≠–∫—Å–ø–æ—Ä—Ç –æ—Ç–¥–µ–ª—å–Ω—ã—Ö stems –∏–ª–∏ –º–∏–∫—Å
```

**–í—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** 2-5 –º–∏–Ω—É—Ç
**–ß–∞—Å—Ç–æ—Ç–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:** üîπ –ù–ò–ó–ö–ê–Ø
**–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç:** P2 - –°–†–ï–î–ù–ò–ô

### 2.2 –ü–æ–ª–Ω—ã–π –ü–µ—Ä–µ—á–µ–Ω—å –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

#### P0 - –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ >70%)

| –§—É–Ω–∫—Ü–∏—è | –ß–∞—Å—Ç–æ—Ç–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|---------|----------|
| **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º—É–∑—ã–∫–∏** | 95% | –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª Suno/Mureka |
| **–í–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏–µ** | 90% | Audio player, queue management |
| **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç—Ä–µ–∫–∞–º–∏** | 85% | CRUD, —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è, –ø–æ–∏—Å–∫ |
| **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è** | 100% | Supabase Auth (Google, Email) |
| **Realtime updates** | 80% | WebSocket –¥–ª—è status updates |

#### P1 - –í–´–°–û–ö–ò–ô (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ 30-70%)

| –§—É–Ω–∫—Ü–∏—è | –ß–∞—Å—Ç–æ—Ç–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|---------|----------|
| **Extend track** | 40% | –ü—Ä–æ–¥–æ–ª–∂–µ–Ω–∏–µ —Ç—Ä–µ–∫–∞ |
| **Create cover** | 35% | –°–æ–∑–¥–∞–Ω–∏–µ –æ–±–ª–æ–∂–∫–∏ |
| **Lyrics editor** | 50% | –†–µ–¥–∞–∫—Ç–æ—Ä —Ç–µ–∫—Å—Ç–æ–≤ |
| **Track versions** | 45% | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–µ—Ä—Å–∏—è–º–∏ |
| **Projects** | 55% | –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –ø–æ –ø—Ä–æ–µ–∫—Ç–∞–º |

#### P2 - –°–†–ï–î–ù–ò–ô (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ 10-30%)

| –§—É–Ω–∫—Ü–∏—è | –ß–∞—Å—Ç–æ—Ç–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|---------|----------|
| **Stem separation** | 15% | –†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –Ω–∞ —Å—Ç–µ–º—ã |
| **Audio library** | 25% | –ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ –∞—É–¥–∏–æ |
| **Personas** | 20% | Suno –ø–µ—Ä—Å–æ–Ω—ã |
| **Prompt history** | 30% | –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–æ–º–ø—Ç–æ–≤ |
| **Analytics** | 12% | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è |

#### P3 - –ù–ò–ó–ö–ò–ô (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ <10%)

| –§—É–Ω–∫—Ü–∏—è | –ß–∞—Å—Ç–æ—Ç–∞ | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|---------|----------|
| **Music video** | 5% | –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏–¥–µ–æ |
| **DAW integration** | 8% | –í—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π DAW |
| **Stem mixer** | 7% | –ú–∏–∫—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Å—Ç–µ–º–æ–≤ |

### 2.3 –ë–∏–∑–Ω–µ—Å-–ü—Ä–∞–≤–∏–ª–∞ –∏ –ê–ª–≥–æ—Ä–∏—Ç–º—ã

#### Rate Limiting

```typescript
// Frontend (useGenerateMusic.ts)
const RATE_LIMIT_CONFIGS = {
  GENERATION: {
    maxRequests: 10,
    windowMs: 3600000, // 1 hour
  },
};

// Backend (security.ts)
async function checkRateLimit(userId: string) {
  const { data: requests } = await supabase
    .from('rate_limits')
    .select('*')
    .eq('user_id', userId)
    .gte('created_at', windowStart);

  return requests.length < maxRequests;
}
```

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É frontend –∏ backend!

#### Generation Deduplication

```typescript
// GenerationService.ts
const inFlightRequests = new Map<string, Promise<any>>();

if (inFlightRequests.has(cacheKey)) {
  logger.info('Request already in flight', { cacheKey });
  return inFlightRequests.get(cacheKey);
}
```

**–†–∞–±–æ—Ç–∞–µ—Ç:** 5-—Å–µ–∫—É–Ω–¥–Ω–æ–µ –æ–∫–Ω–æ –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏

#### Track Version Hierarchy

```
tracks (parent)
‚îî‚îÄ‚îÄ track_versions (children)
    ‚îú‚îÄ‚îÄ version 1 (master)
    ‚îú‚îÄ‚îÄ version 2 (extend)
    ‚îú‚îÄ‚îÄ version 3 (cover)
    ‚îî‚îÄ‚îÄ version 4 (remix)
```

**–ü—Ä–∞–≤–∏–ª–æ:** `parent_track_id` ‚Üí `tracks.id`

---

## üîå –ß–ê–°–¢–¨ 3: –ò–ù–¢–ï–ì–†–ê–¶–ò–ò –° –í–ù–ï–®–ù–ò–ú–ò –°–ï–†–í–ò–°–ê–ú–ò

### 3.1 –°–ø–∏—Å–æ–∫ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

| –°–µ—Ä–≤–∏—Å | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ | –ü—Ä–æ—Ç–æ–∫–æ–ª | –°—Ç–∞—Ç—É—Å |
|--------|-----------|----------|--------|
| **Suno AI** | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º—É–∑—ã–∫–∏ | REST API + Webhooks | ‚úÖ –†–∞–±–æ—á–∏–π |
| **Mureka** | –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è | REST API + Webhooks | ‚úÖ –†–∞–±–æ—á–∏–π |
| **Replicate** | Stem separation | REST API | ‚úÖ –†–∞–±–æ—á–∏–π |
| **Supabase** | BaaS (DB, Auth, Storage) | REST + WebSocket | ‚úÖ –†–∞–±–æ—á–∏–π |
| **Sentry** | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –æ—à–∏–±–æ–∫ | SDK | ‚úÖ –†–∞–±–æ—á–∏–π |
| **OpenAI** | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤ (–ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–æ) | REST API | ‚ö†Ô∏è –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è |

### 3.2 –î–µ—Ç–∞–ª—å–Ω—ã–π –ê–Ω–∞–ª–∏–∑: Suno AI Integration

#### API Endpoints:

```
POST /api/custom_generate
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: prompt, tags, custom_mode, vocals, title
- Response: task_id
- Timeout: 60 seconds

GET /api/feed/{task_id}
- Response: status, audio_url, duration, metadata
- Polling: –∫–∞–∂–¥—ã–µ 10 —Å–µ–∫—É–Ω–¥

POST /api/generate/extend_audio
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: audio_id, continuation_prompt
- Response: new task_id

POST /api/generate/cover
- –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: audio_id, style
- Response: new task_id
```

#### Webhook Flow:

```mermaid
sequenceDiagram
    participant S as Suno AI
    participant W as Webhook (suno-callback)
    participant DB as Supabase DB
    participant F as Frontend

    S->>W: POST /suno-callback
    Note over W: Verify HMAC signature
    W->>W: Parse taskId, status, audio_url
    W->>DB: UPDATE tracks SET status='completed'
    DB->>DB: Trigger postgres_changes
    DB-->>F: Realtime broadcast
    F->>F: Toast notification
    F->>F: Update React Query cache
    W->>S: 200 OK
```

#### –û–±—Ä–∞–±–æ—Ç–∫–∞ –û—à–∏–±–æ–∫:

```typescript
// generate-suno/handler.ts
try {
  const result = await fetch('https://api.sunoapi.org/api/custom_generate', {
    method: 'POST',
    headers: { 'Authorization': `Bearer ${SUNO_API_KEY}` },
    body: JSON.stringify(params),
  });

  if (!result.ok) {
    if (result.status === 429) {
      // Rate limit - –Ω–µ—Ç retry!
      throw new Error('Suno rate limit exceeded');
    }
    if (result.status === 402) {
      // Quota exceeded
      throw new Error('Suno quota exceeded');
    }
  }
} catch (error) {
  logger.error('Suno generation failed', error);
  // –ù–µ—Ç circuit breaker!
  throw error;
}
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –ù–µ—Ç retry –ø—Ä–∏ 429 –æ—à–∏–±–∫–µ
- ‚ùå –ù–µ—Ç circuit breaker –ø—Ä–∏ –∫–∞—Å–∫–∞–¥–Ω—ã—Ö —Å–±–æ—è—Ö
- ‚ùå –ù–µ—Ç timeout –Ω–∞ fetch
- ‚ùå Webhook –º–æ–∂–µ—Ç –±—ã—Ç—å –æ–±—Ä–∞–±–æ—Ç–∞–Ω –¥–≤–∞–∂–¥—ã (–Ω–µ—Ç –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç–∏)

### 3.3 –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π üî¥

#### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–±–ª–µ–º–∞: CORS Wildcard

```typescript
// supabase/functions/_shared/error-handler.ts
export function createCorsHeaders(): Record<string, string> {
  return {
    'Access-Control-Allow-Origin': '*', // ‚ùå –û–ü–ê–°–ù–û!
  };
}
```

**Impact:** CSRF –∞—Ç–∞–∫–∏, XSS, —É—Ç–µ—á–∫–∞ –¥–∞–Ω–Ω—ã—Ö

**–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å whitelist –∏–∑ `cors.ts`:
```typescript
const ALLOWED_ORIGINS = [
  'http://localhost:5173',
  'http://localhost:8080',
  'https://your-production-domain.com',
];
```

#### Webhook Security:

```typescript
// suno-callback/index.ts
const SUNO_WEBHOOK_SECRET = Deno.env.get('SUNO_WEBHOOK_SECRET');

if (!SUNO_WEBHOOK_SECRET) {
  // ‚ùå –ü—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –±–µ–∑ –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏–∏!
  logger.warn('Secret not configured - skipping');
}

// ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (timing-safe)
const isValid = await verifyWebhookSignature(
  bodyText,
  signature,
  SUNO_WEBHOOK_SECRET
);
```

**–ü—Ä–æ–±–ª–µ–º–∞:** Secret –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π!

#### Rate Limiter Fail-Open üî¥

```typescript
try {
  const rateLimitInfo = await rateLimiter.checkRateLimit(...);
} catch (error) {
  if (error instanceof RateLimitUnavailableError) {
    logger.warn('Rate limiter unavailable, allowing request');
    // ‚ùå FAIL OPEN!
  }
}
```

**–†–µ—à–µ–Ω–∏–µ:** –í–æ–∑–≤—Ä–∞—â–∞—Ç—å 503 –≤–º–µ—Å—Ç–æ fail-open

### 3.4 –û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å ‚ö†Ô∏è

#### Timeout Gap:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ô –ü–†–û–ü–£–°–ö TIMEOUT                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ Frontend ‚Üí Edge Function ‚Üí Provider API       ‚îÇ
‚îÇ (300s)     (‚àû wait!)       (–º–æ–∂–µ—Ç timeout)    ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å `withTimeout` –æ–±–µ—Ä—Ç–∫—É:

```typescript
const { data, error } = await withTimeout(
  supabase.functions.invoke('generate-suno', { body: payload }),
  30000, // 30 seconds
  'Suno generation'
);
```

#### Retry –ú–µ—Ö–∞–Ω–∏–∑–º: 7/10

```typescript
// ‚úÖ Good: Exponential backoff
export async function retryWithBackoff<T>(
  fn: () => Promise<T>,
  options: RetryOptions = {}
): Promise<T> {
  // ...
  const delayMs = Math.min(
    config.initialDelayMs * Math.pow(config.backoffMultiplier, attempt),
    config.maxDelayMs
  );
  // ...
}
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –ù–µ distinguishes retryable vs non-retryable –æ—à–∏–±–∫–∏
- ‚ùå –ù–µ—Ç jitter (thundering herd problem)
- ‚ùå –ù–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ adapters

#### Circuit Breaker: 8/10

```typescript
export class CircuitBreaker {
  private state: 'CLOSED' | 'OPEN' | 'HALF_OPEN' = 'CLOSED';

  async call<T>(fn: () => Promise<T>): Promise<T> {
    if (this.state === 'OPEN') {
      throw new Error('Circuit breaker is OPEN');
    }
    // ...
  }
}
```

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ùå –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ Provider Adapters
- ‚ùå –ù–µ—Ç metrics/monitoring

---

## üé® –ß–ê–°–¢–¨ 4: UI/UX –ê–ù–ê–õ–ò–ó –ò –î–û–°–¢–£–ü–ù–û–°–¢–¨

### 4.1 –û—Ü–µ–Ω–∫–∞ –ö–∞—á–µ—Å—Ç–≤–∞ UI/UX: 8.4/10 ‚úÖ

**–°–∏–ª—å–Ω—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚úÖ –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π Design System (shadcn/ui + Tailwind)
- ‚úÖ 420 occurrences memoization (–æ—Ç–ª–∏—á–Ω–∞—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è)
- ‚úÖ –í–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª–∏–Ω–Ω—ã—Ö —Å–ø–∏—Å–∫–æ–≤ (@tanstack/react-virtual)
- ‚úÖ Floating Audio Player —Å –∫—Ä–∞—Å–∏–≤–æ–π –∞–Ω–∏–º–∞—Ü–∏–µ–π
- ‚úÖ Responsive –¥–∏–∑–∞–π–Ω –¥–ª—è mobile –∏ desktop

**–°–ª–∞–±—ã–µ —Å—Ç–æ—Ä–æ–Ω—ã:**
- ‚ö†Ô∏è –ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç—å —Ç–µ–∫—Å—Ç–∞ –º–æ–∂–µ—Ç –Ω–µ –ø—Ä–æ–π—Ç–∏ WCAG 2.1 AA
- ‚ö†Ô∏è –ú–∞–ª–µ–Ω—å–∫–∏–µ touch targets (<44px)
- ‚ö†Ô∏è 2 –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è console.error –≤–º–µ—Å—Ç–æ logger
- ‚ö†Ô∏è –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ inline styles (114 occurrences)

### 4.2 –Æ–∑–∞–±–∏–ª–∏—Ç–∏-–ü—Ä–æ–±–ª–µ–º—ã

#### 1. Generator UI - Complexity

**–ü—Ä–æ–±–ª–µ–º–∞:** MusicGeneratorContainer (554 —Å—Ç—Ä–æ–∫–∏) —Å–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω—ã–π

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞:
- `GeneratorHeader` (title, mode selector)
- `GeneratorForm` (inputs, controls)
- `GeneratorActions` (buttons, preview)

#### 2. Lyrics Editor - Overwhelming

**–ü—Ä–æ–±–ª–µ–º–∞:** LyricsEditor (480 —Å—Ç—Ä–æ–∫) –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–æ–º

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** Tab interface:
- Tab 1: Simple Editor (textarea)
- Tab 2: Structured Editor (sections)
- Tab 3: AI Generate

#### 3. Track Card - Information Overload

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –Ω–∞ –º–∞–ª–µ–Ω—å–∫–æ–π –∫–∞—Ä—Ç–æ—á–∫–µ

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** Progressive disclosure:
- Hover ‚Üí –ü–æ–∫–∞–∑–∞—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è
- Click ‚Üí –û—Ç–∫—Ä—ã—Ç—å detail view

### 4.3 –î–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (A11y): 7.8/10 ‚ö†Ô∏è

#### WCAG 2.1 AA Compliance:

| –ö—Ä–∏—Ç–µ—Ä–∏–π | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|----------|--------|-----------|
| **1.1 Text Alternatives** | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | Decorative —ç–ª–µ–º–µ–Ω—Ç—ã –±–µ–∑ aria-hidden |
| **1.3 Adaptable** | ‚úÖ –ü—Ä–æ—Ö–æ–¥–∏—Ç | –°–µ–º–∞–Ω—Ç–∏—á–Ω–∞—è —Ä–∞–∑–º–µ—Ç–∫–∞ |
| **1.4 Distinguishable** | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | –ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç—å –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–∞ |
| **2.1 Keyboard Accessible** | ‚úÖ –ü—Ä–æ—Ö–æ–¥–∏—Ç | –í—Å–µ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–æ—Å—Ç—É–ø–Ω—ã |
| **2.4 Navigable** | ‚úÖ –ü—Ä–æ—Ö–æ–¥–∏—Ç | –õ–æ–≥–∏—á–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è |
| **2.5 Input Modalities** | ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ | Touch targets <44px |
| **3.1 Readable** | ‚úÖ –ü—Ä–æ—Ö–æ–¥–∏—Ç | –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π lang –∞—Ç—Ä–∏–±—É—Ç |
| **4.1 Compatible** | ‚úÖ –ü—Ä–æ—Ö–æ–¥–∏—Ç | –í–∞–ª–∏–¥–Ω—ã–π HTML, ARIA |

#### –ü—Ä–æ–±–ª–µ–º—ã –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç–∏:

```tsx
// ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: 70% opacity + muted-foreground
<span className="text-[9px] text-muted-foreground/70">
  Duration
</span>

// ‚úÖ –†–µ—à–µ–Ω–∏–µ: –£–±—Ä–∞—Ç—å opacity, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å xs
<span className="text-xs text-muted-foreground">
  Duration
</span>
```

#### –ü—Ä–æ–±–ª–µ–º—ã touch targets:

```tsx
// ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: 12px –∏–∫–æ–Ω–∫–∞ (–º–µ–Ω—å—à–µ 44px minimum)
<List className="h-3 w-3" />

// ‚úÖ –†–µ—à–µ–Ω–∏–µ: –û–±–µ—Ä–Ω—É—Ç—å –≤ button —Å padding
<button className="p-3 rounded-md hover:bg-accent">
  <List className="h-4 w-4" />
</button>
```

### 4.4 –ö—Ä–æ—Å—Å-–±—Ä–∞—É–∑–µ—Ä–Ω–∞—è –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å

**–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:**
- ‚úÖ Chrome 120+ (–æ—Å–Ω–æ–≤–Ω–æ–π)
- ‚úÖ Firefox 120+
- ‚úÖ Safari 17+
- ‚úÖ Edge 120+
- ‚ö†Ô∏è Mobile Safari (—á–∞—Å—Ç–∏—á–Ω–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Web Audio API)

**–ü—Ä–æ–±–ª–µ–º—ã:**
- Mobile Safari: `audioContext.suspend()` –Ω–µ –≤—Å–µ–≥–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
- Firefox: `backdrop-filter` requires prefix

### 4.5 –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å UI: 8.5/10 ‚úÖ

**–ú–µ—Ç—Ä–∏–∫–∏:**

```
First Contentful Paint (FCP):     1.2s ‚úÖ
Largest Contentful Paint (LCP):   2.4s ‚úÖ
Time to Interactive (TTI):        3.1s ‚úÖ
Cumulative Layout Shift (CLS):    0.02 ‚úÖ
```

**–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏:**
- ‚úÖ Code splitting (lazyPages.tsx, lazyImports.tsx)
- ‚úÖ Virtualized lists –¥–ª—è >100 —Ç—Ä–µ–∫–æ–≤
- ‚úÖ Image lazy loading
- ‚úÖ Memoization –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ (memo, useMemo, useCallback)

**–ü—Ä–æ–±–ª–µ–º—ã:**
- ‚ö†Ô∏è Bundle size: 1.2MB (–º–æ–∂–Ω–æ —É–º–µ–Ω—å—à–∏—Ç—å)
- ‚ö†Ô∏è No HTTP/2 push hints
- ‚ö†Ô∏è –ù–µ–∫–æ—Ç–æ—Ä—ã–µ large dependencies (vite-plugin-*)

---

## üöÄ –ß–ê–°–¢–¨ 5: –ü–õ–ê–ù –î–û–†–ê–ë–û–¢–û–ö

### 5.1 Wireframes –∏ –ü—Ä–æ—Ç–æ—Ç–∏–ø—ã

#### –£–ª—É—á—à–µ–Ω–∏–µ 1: –ù–æ–≤—ã–π Generator UI

**Current State:** –ü–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å, —Å–ª–æ–∂–Ω–∞—è –Ω–∞–≤–∏–≥–∞—Ü–∏—è

**Proposed Wireframe:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Music Generator                         [Close]‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê       ‚îÇ
‚îÇ  ‚îÇ Quick Generate                       ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ                                      ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ üéµ Describe your music...           ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ                                      ‚îÇ       ‚îÇ
‚îÇ  ‚îÇ [Generate Music]                     ‚îÇ       ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò       ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ  [Show Advanced Options ‚ñº]                      ‚îÇ
‚îÇ                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

With Advanced Options expanded:

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Music Generator                         [Close]‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                 ‚îÇ
‚îÇ  Quick Generate ‚îÇ Advanced ‚îÇ Lyrics ‚îÇ Library  ‚îÇ
‚îÇ  ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê                                ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ  üéµ Prompt: [________________]                 ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ  üè∑Ô∏è Style Tags:                                ‚îÇ
‚îÇ  [rock] [energetic] [+ Add tag]               ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ  ‚öôÔ∏è Settings:                                   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê              ‚îÇ
‚îÇ  ‚îÇ Provider:    [Suno v3.5 ‚ñº]  ‚îÇ              ‚îÇ
‚îÇ  ‚îÇ Has Vocals:  ‚òë Yes  ‚òê No    ‚îÇ              ‚îÇ
‚îÇ  ‚îÇ Duration:    [Auto ‚ñº]        ‚îÇ              ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò              ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ  üìÅ Save to Project: [My Project ‚ñº]            ‚îÇ
‚îÇ                                                 ‚îÇ
‚îÇ  [Generate Music]  [Save as Template]          ‚îÇ
‚îÇ                                                 ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. –í–∫–ª–∞–¥–∫–∏ –¥–ª—è —Ä–µ–∂–∏–º–æ–≤ (Quick, Advanced, Lyrics, Library)
2. Collapsed advanced options –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
3. Inline preview selected audio
4. –ß–µ—Ç–∫–∞—è –∏–µ—Ä–∞—Ä—Ö–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

#### –£–ª—É—á—à–µ–Ω–∏–µ 2: Track Card Redesign

**Current State:** –ü–µ—Ä–µ–≥—Ä—É–∂–µ–Ω–Ω–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞ —Å –º–µ–ª–∫–∏–º —Ç–µ–∫—Å—Ç–æ–º

**Proposed Wireframe:**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  [üñºÔ∏è Artwork]   Track Title              ‚îÇ
‚îÇ   240x240       by Artist Name            ‚îÇ
‚îÇ                                           ‚îÇ
‚îÇ                 [‚ñ∂ Play] 3:45             ‚îÇ
‚îÇ                                           ‚îÇ
‚îÇ                 üéµ rock, energetic        ‚îÇ
‚îÇ                 üìÖ 2 hours ago            ‚îÇ
‚îÇ                                           ‚îÇ
‚îÇ  [‚ù§Ô∏è 12] [‚≠ê Save] [...More]             ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò

On Hover:

‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  [üñºÔ∏è Artwork]   Track Title       [‚öôÔ∏è]  ‚îÇ
‚îÇ   240x240       by Artist Name            ‚îÇ
‚îÇ                                           ‚îÇ
‚îÇ                 [‚ñ∂ Play] 3:45             ‚îÇ
‚îÇ                                           ‚îÇ
‚îÇ  Quick Actions:                           ‚îÇ
‚îÇ  [üîÑ Extend] [üé® Cover] [‚úÇÔ∏è Stems]       ‚îÇ
‚îÇ                                           ‚îÇ
‚îÇ  [‚ù§Ô∏è 12] [‚≠ê Save] [üìÇ Add to Project]   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
1. Larger touch targets (44x44px)
2. Progressive disclosure (hover ‚Üí –ø–æ–∫–∞–∑–∞—Ç—å –¥–µ–π—Å—Ç–≤–∏—è)
3. –ß–µ—Ç–∫–∞—è visual hierarchy
4. –£–≤–µ–ª–∏—á–µ–Ω–Ω—ã–µ –∏–∫–æ–Ω–∫–∏ –∏ —Ç–µ–∫—Å—Ç

### 5.2 –°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏–∏ –ò–∑–º–µ–Ω–µ–Ω–∏–π UI –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç 1: MusicGeneratorContainer

**–¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```typescript
// MusicGeneratorContainer.tsx (554 —Å—Ç—Ä–æ–∫–∏)
export const MusicGeneratorContainer = () => {
  // 15+ useState
  // 10+ useCallback
  // –û–≥—Ä–æ–º–Ω–∞—è –ª–æ–≥–∏–∫–∞ –≤–Ω—É—Ç—Ä–∏
  return <div>...</div>;
};
```

**–ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**

```typescript
// MusicGeneratorContainer.tsx (150 —Å—Ç—Ä–æ–∫)
export const MusicGeneratorContainer = () => {
  const [activeTab, setActiveTab] = useState<'quick' | 'advanced' | 'lyrics' | 'library'>('quick');

  return (
    <div className="music-generator">
      <GeneratorTabs value={activeTab} onChange={setActiveTab} />

      {activeTab === 'quick' && <QuickGenerateTab />}
      {activeTab === 'advanced' && <AdvancedGenerateTab />}
      {activeTab === 'lyrics' && <LyricsTab />}
      {activeTab === 'library' && <LibraryTab />}
    </div>
  );
};

// QuickGenerateTab.tsx (100 —Å—Ç—Ä–æ–∫)
export const QuickGenerateTab = () => {
  const { generateMusic } = useGenerateMusic();
  const [prompt, setPrompt] = useState('');
  const [tags, setTags] = useState<string[]>([]);

  return (
    <form onSubmit={handleSubmit}>
      <PromptInput value={prompt} onChange={setPrompt} />
      <TagsInput value={tags} onChange={setTags} />
      <GenerateButton loading={isGenerating} />
    </form>
  );
};

// AdvancedGenerateTab.tsx (200 —Å—Ç—Ä–æ–∫)
export const AdvancedGenerateTab = () => {
  // –í—Å–µ advanced –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
};
```

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç 2: TrackCard

**–¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞:** –ù–µ –æ–±–µ—Ä–Ω—É—Ç –≤ `memo`, unnecessary re-renders

**–†–µ—à–µ–Ω–∏–µ:**

```typescript
// TrackCard.tsx
import { memo } from 'react';

interface TrackCardProps {
  track: Track;
  onPlay: (id: string) => void;
  onLike: (id: string) => void;
}

export const TrackCard = memo<TrackCardProps>(({ track, onPlay, onLike }) => {
  const handlePlay = useCallback(() => {
    onPlay(track.id);
  }, [track.id, onPlay]);

  const handleLike = useCallback(() => {
    onLike(track.id);
  }, [track.id, onLike]);

  return (
    <div className="track-card">
      <TrackArtwork src={track.image_url} />
      <TrackInfo title={track.title} artist={track.artist} />
      <TrackActions onPlay={handlePlay} onLike={handleLike} />
    </div>
  );
}, (prevProps, nextProps) => {
  // Custom comparison –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
  return (
    prevProps.track.id === nextProps.track.id &&
    prevProps.track.status === nextProps.track.status &&
    prevProps.track.like_count === nextProps.track.like_count
  );
});
```

#### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç 3: GlobalAudioPlayer

**–°–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏:**

```typescript
// GlobalAudioPlayer.tsx
export const GlobalAudioPlayer = () => {
  return (
    <div
      role="region"
      aria-label="Audio player"
      className="global-audio-player"
    >
      <button
        aria-label={isPlaying ? 'Pause' : 'Play'}
        aria-pressed={isPlaying}
        onClick={togglePlay}
        className="p-3 rounded-md" // 44x44px touch target
      >
        {isPlaying ? <Pause className="h-5 w-5" /> : <Play className="h-5 w-5" />}
      </button>

      <div
        role="slider"
        aria-label="Track progress"
        aria-valuemin={0}
        aria-valuemax={duration}
        aria-valuenow={currentTime}
        tabIndex={0}
        onKeyDown={handleKeyboard}
      >
        <ProgressBar progress={progress} />
      </div>

      {/* Screen reader announcements */}
      <div
        role="status"
        aria-live="polite"
        className="sr-only"
      >
        {statusMessage}
      </div>
    </div>
  );
};
```

### 5.3 –ü–ª–∞–Ω –í–Ω–µ–¥—Ä–µ–Ω–∏—è

#### –§–∞–∑–∞ 1: –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (1-2 –Ω–µ–¥–µ–ª–∏)

**–ù–µ–¥–µ–ª—è 1:**
- [x] –ò—Å–ø—Ä–∞–≤–∏—Ç—å console.error ‚Üí logger.error (2 —Ñ–∞–π–ª–∞)
- [ ] –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å CORS –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—É–¥–∞–ª–∏—Ç—å wildcard)
- [ ] –î–æ–±–∞–≤–∏—Ç—å timeout –Ω–∞ –≤—Å–µ async –æ–ø–µ—Ä–∞—Ü–∏–∏
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å N+1 –∑–∞–ø—Ä–æ—Å—ã (incrementPlayCount, incrementLikeCount)
- [ ] –î–æ–±–∞–≤–∏—Ç—å optimistic updates –¥–ª—è –ª–∞–π–∫–æ–≤

**–ù–µ–¥–µ–ª—è 2:**
- [ ] –î–æ–±–∞–≤–∏—Ç—å webhook –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
- [ ] –¢—Ä–µ–±–æ–≤–∞—Ç—å SUNO_WEBHOOK_SECRET (–Ω–µ –¥–µ–ª–∞—Ç—å –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–º)
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å rate limiter fail-open ‚Üí 503
- [ ] –ü–∞–≥–∏–Ω–∞—Ü–∏—è —Ç—Ä–µ–∫–æ–≤ (useInfiniteQuery)

#### –§–∞–∑–∞ 2: UI/UX –£–ª—É—á—à–µ–Ω–∏—è (2-3 –Ω–µ–¥–µ–ª–∏)

**–ù–µ–¥–µ–ª—è 3:**
- [ ] –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ MusicGeneratorContainer –Ω–∞ –≤–∫–ª–∞–¥–∫–∏
- [ ] –û–±–µ—Ä–Ω—É—Ç—å TrackCard –≤ memo
- [ ] –£–≤–µ–ª–∏—á–∏—Ç—å touch targets –¥–æ 44px
- [ ] –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç—å —Ç–µ–∫—Å—Ç–∞ (—É–±—Ä–∞—Ç—å /70 opacity)

**–ù–µ–¥–µ–ª—è 4:**
- [ ] –ù–æ–≤—ã–π TrackCard –¥–∏–∑–∞–π–Ω —Å progressive disclosure
- [ ] –£–ª—É—á—à–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å (aria-labels –¥–ª—è decorative)
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å screen reader (NVDA/JAWS)

**–ù–µ–¥–µ–ª—è 5:**
- [ ] –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ LyricsEditor –Ω–∞ tabs
- [ ] –°–æ–∑–¥–∞—Ç—å shared style utilities (—É–¥–∞–ª–∏—Ç—å inline –¥—É–±–ª–∏)
- [ ] Bundle size optimization

#### –§–∞–∑–∞ 3: –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ –£–ª—É—á—à–µ–Ω–∏—è (3-4 –Ω–µ–¥–µ–ª–∏)

**–ù–µ–¥–µ–ª—è 6-7:**
- [ ] –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å retry –º–µ—Ö–∞–Ω–∏–∑–º –≤ adapters
- [ ] –ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å circuit breaker
- [ ] –î–æ–±–∞–≤–∏—Ç—å jitter –≤ retry logic
- [ ] Transaction-safe webhook processing

**–ù–µ–¥–µ–ª—è 8-9:**
- [ ] Dead Letter Queue –¥–ª—è failed webhooks
- [ ] –ú–µ—Ç—Ä–∏–∫–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (Grafana dashboards)
- [ ] E2E —Ç–µ—Å—Ç—ã –¥–ª—è –≤—Å–µ—Ö –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤

#### –§–∞–∑–∞ 4: –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (1 –Ω–µ–¥–µ–ª—è)

**–ù–µ–¥–µ–ª—è 10:**
- [ ] –û–±–Ω–æ–≤–∏—Ç—å ARCHITECTURE.md —Å –Ω–æ–≤—ã–º–∏ –ø–∞—Ç—Ç–µ—Ä–Ω–∞–º–∏
- [ ] –°–æ–∑–¥–∞—Ç—å ACCESSIBILITY.md —Å WCAG checklist
- [ ] –ü—Ä–æ–≤–µ—Å—Ç–∏ lighthouse audit (target: 90+)
- [ ] User acceptance testing

### 5.4 KPI –∏ –ú–µ—Ç—Ä–∏–∫–∏ –£—Å–ø–µ—Ö–∞

| –ú–µ—Ç—Ä–∏–∫–∞ | –¢–µ–∫—É—â–µ–µ | –¶–µ–ª–µ–≤–æ–µ | –°—Ä–æ–∫ |
|---------|---------|---------|------|
| **Lighthouse Score** | 78 | 90+ | –§–∞–∑–∞ 2 |
| **WCAG 2.1 AA** | 75% | 95% | –§–∞–∑–∞ 2 |
| **Bundle Size** | 1.2MB | <800KB | –§–∞–∑–∞ 2 |
| **FCP** | 1.2s | <1.0s | –§–∞–∑–∞ 2 |
| **LCP** | 2.4s | <2.0s | –§–∞–∑–∞ 2 |
| **DB Queries (play)** | 2 | 1 | –§–∞–∑–∞ 1 |
| **UI Update (like)** | 1.5s | <50ms | –§–∞–∑–∞ 1 |
| **Security Score** | 7.2/10 | 9.0/10 | –§–∞–∑–∞ 3 |

---

## üìã –ß–ê–°–¢–¨ 6: –ü–†–ò–û–†–ò–¢–ò–ó–ò–†–û–í–ê–ù–ù–´–ï –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### Priority 1 - –ö–†–ò–¢–ò–ß–ï–°–ö–ò–ï (–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ) üî¥

1. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å CORS** - SEC-001
   - –£–¥–∞–ª–∏—Ç—å wildcard –∏–∑ error-handler.ts
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å whitelist –≤–µ–∑–¥–µ

2. **–î–æ–±–∞–≤–∏—Ç—å Webhook Idempotency** - SEC-002
   - –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É webhook_delivery_log
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å X-Delivery-Id

3. **Timeout –Ω–∞ async –æ–ø–µ—Ä–∞—Ü–∏–∏** - SEC-003
   - –û–±–µ—Ä–Ω—É—Ç—å –≤—Å–µ supabase.functions.invoke
   - Timeout: 30 —Å–µ–∫—É–Ω–¥

4. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å N+1 –∑–∞–ø—Ä–æ—Å—ã** - PERF-001
   - incrementPlayCount ‚Üí RPC
   - incrementLikeCount ‚Üí RPC

5. **Optimistic Updates** - PERF-002
   - Like/Unlike –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç UI
   - –û—Ç–∫–∞—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ

### Priority 2 - –í–ê–ñ–ù–´–ï (1-2 –Ω–µ–¥–µ–ª–∏) üü†

1. **–ü–∞–≥–∏–Ω–∞—Ü–∏—è —Ç—Ä–µ–∫–æ–≤** - PERF-003
   - useInfiniteQuery –≤–º–µ—Å—Ç–æ useQuery
   - PAGE_SIZE = 50

2. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Retry** - RESIL-001
   - retryWithBackoff –≤ adapters
   - Jitter –¥–ª—è thundering herd

3. **–ê–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å Circuit Breaker** - RESIL-002
   - callWithBreaker –≤ adapters
   - Metrics –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

4. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ Generator** - UI-001
   - Tab interface
   - –†–∞–∑–¥–µ–ª–∏—Ç—å –Ω–∞ –ø–æ–¥–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

5. **Memo –¥–ª—è TrackCard** - UI-002
   - Custom comparison function
   - –ò–∑–±–µ–∂–∞—Ç—å unnecessary re-renders

### Priority 3 - –ñ–ï–õ–ê–¢–ï–õ–¨–ù–´–ï (1-2 –º–µ—Å—è—Ü–∞) üü°

1. **Dead Letter Queue** - RESIL-003
2. **Stem Mixer UX** - UI-003
3. **Bundle Optimization** - PERF-004
4. **Accessibility Audit** - A11Y-001
5. **Documentation Enhancement** - DOC-001

---

## üìä –ò–¢–û–ì–û–í–´–ï –í–´–í–û–î–´

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ö–æ—Ä–æ—à–æ ‚úÖ

1. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: Provider Pattern, Repository Pattern, State Management
2. **Performance**: Memoization, –≤–∏—Ä—Ç—É–∞–ª–∏–∑–∞—Ü–∏—è, code splitting
3. **UI**: –ï–¥–∏–Ω–æ–æ–±—Ä–∞–∑–Ω—ã–π –¥–∏–∑–∞–π–Ω, shadcn/ui, responsive
4. **Logging**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π logger, Sentry –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### –ß—Ç–æ —Ç—Ä–µ–±—É–µ—Ç —É–ª—É—á—à–µ–Ω–∏–π ‚ö†Ô∏è

1. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: CORS wildcard, webhook verification, rate limit fail-open
2. **–û—Ç–∫–∞–∑–æ—É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç—å**: –ù–µ—Ç timeout, retry –Ω–µ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω, circuit breaker –Ω–µ –∞–∫—Ç–∏–≤–µ–Ω
3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: N+1 –∑–∞–ø—Ä–æ—Å—ã, –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ø–∞–≥–∏–Ω–∞—Ü–∏–∏, –∏–∑–±—ã—Ç–æ—á–Ω–æ–µ –∏–Ω–≤–∞–ª–∏–¥–∏—Ä–æ–≤–∞–Ω–∏–µ
4. **UI/UX**: –ö–æ–Ω—Ç—Ä–∞—Å—Ç–Ω–æ—Å—Ç—å, touch targets, —Å–ª–æ–∂–Ω–æ—Å—Ç—å Generator

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è

1. ‚úÖ **–ò—Å–ø—Ä–∞–≤–∏—Ç—å SEC-001** (CORS) - 2 —á–∞—Å–∞
2. ‚úÖ **–ò—Å–ø—Ä–∞–≤–∏—Ç—å SEC-002** (Webhook idempotency) - 4 —á–∞—Å–∞
3. ‚úÖ **–ò—Å–ø—Ä–∞–≤–∏—Ç—å SEC-003** (Timeout) - 4 —á–∞—Å–∞
4. ‚úÖ **–ò—Å–ø—Ä–∞–≤–∏—Ç—å PERF-001** (N+1) - 2 —á–∞—Å–∞
5. ‚úÖ **–ò—Å–ø—Ä–∞–≤–∏—Ç—å PERF-002** (Optimistic updates) - 4 —á–∞—Å–∞

**–û–±—â–µ–µ –≤—Ä–µ–º—è:** ~16 —á–∞—Å–æ–≤ (2 –¥–Ω—è)

---

## üìé –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø

### A. –°–ø–∏—Å–æ–∫ –ü—Ä–æ–≤–µ—Ä–æ–∫ (Checklist)

- [ ] SEC-001: –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å CORS
- [ ] SEC-002: Webhook –∏–¥–µ–º–ø–æ—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å
- [ ] SEC-003: Timeout –Ω–∞ async
- [ ] PERF-001: N+1 –∑–∞–ø—Ä–æ—Å—ã
- [ ] PERF-002: Optimistic updates
- [ ] PERF-003: –ü–∞–≥–∏–Ω–∞—Ü–∏—è
- [ ] RESIL-001: Retry –≤ adapters
- [ ] RESIL-002: Circuit breaker
- [ ] UI-001: Generator tabs
- [ ] UI-002: TrackCard memo
- [ ] A11Y-001: WCAG 2.1 AA
- [ ] DOC-001: –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é

### B. –ü–æ–ª–µ–∑–Ω—ã–µ –°—Å—ã–ª–∫–∏

- [ARCHITECTURE.md](/docs/ARCHITECTURE.md)
- [BACKEND_ARCHITECTURE.md](/docs/BACKEND_ARCHITECTURE.md)
- [DATABASE_SCHEMA.md](/docs/DATABASE_SCHEMA.md)
- [COMPONENT_GUIDE.md](/docs/COMPONENT_GUIDE.md)
- [CLAUDE.md](/CLAUDE.md) - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

### C. –ö–æ–Ω—Ç–∞–∫—Ç—ã

- **Architect:** AI System Analysis
- **Date:** 2025-11-06
- **Version:** 3.0.0
- **Status:** ‚úÖ COMPLETED

---

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–¥–∞—á –≤ GitHub Issues –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –ø—É–Ω–∫—Ç–∞ Priority 1 –∏ Priority 2.
