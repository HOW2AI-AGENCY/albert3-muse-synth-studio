# Аудит мобильного UI/UX — 12 ноября 2025 г.

Этот документ содержит результаты аудита мобильного пользовательского интерфейса, проведенного 12 ноября 2025 года. Цель аудита — выявить проблемы с юзабилити, версткой и доступностью на мобильных устройствах (экраны <768px).

## Итоги аудита

| Компонент                  | Проблема                                                                                                 | Приоритет | Статус     |
| -------------------------- | -------------------------------------------------------------------------------------------------------- | --------- | ---------- |
| **TrackCard**              | Недостаточный минимальный размер сенсорных целей (touch target) для иконок действий.                      | **P0**    | To Do      |
|                            | Отсутствие явного минимального размера для карточки может приводить к слишком мелким элементам.             | P1        | To Do      |
|                            | Информационная плотность: на очень маленьких экранах текст может быть трудночитаемым.                   | P2        | To Do      |
| **MinimalDetailPanel**     | Высота панели может превышать высоту вьюпорта, скрывая важные элементы.                                  | **P0**    | To Do      |
|                            | Отсутствие "липкого" (sticky) футера с действиями может требовать прокрутки для доступа к ним.            | P1        | To Do      |
|                            | Вложенные области прокрутки (ScrollArea внутри панели) могут создавать плохой UX.                       | P2        | To Do      |
| **GlobalAudioPlayer**      | `z-index` плеера (`--z-mini-player`) может конфликтовать с другими элементами (например, модальными окнами). | **P0**    | To Do      |
|                            | Отсутствие отступов для безопасных зон (safe area insets) может приводить к перекрытию системными элементами iOS/Android. | P1        | To Do      |
|                            | На очень узких экранах (<375px) элементы управления могут быть слишком сжаты.                              | P2        | To Do      |
| **Layout & Spacing**       | Отсутствие глобального использования `safe-area-inset-*` для основных макетов.                           | P1        | To Do      |
|                            | Непоследовательное использование сетки 8px для отступов в некоторых компонентах.                           | P2        | To Do      |

---

## Детальный анализ и рекомендации

### 1. TrackCard (`src/features/tracks/ui/TrackCard.tsx`)

#### Проблема P0: Недостаточный размер сенсорных целей (Touch Target)
- **Описание:** Иконки действий в `TrackCardActions` (`Like`, `Download`, `Share` и др.) являются кнопками `Button` с размером `icon`, что может приводить к их фактическому размеру меньше рекомендуемых 44x44px. Это нарушает WCAG 2.1.
- **Файлы:** `src/features/tracks/components/card/TrackCardActions.tsx`
- **Рекомендация:** Добавить CSS-класс `touch-target-min` (из `src/styles/utilities.css`) ко всем кнопкам-иконкам, чтобы гарантировать минимальный размер кликабельной области без изменения визуального размера иконки.

#### Проблема P1: Отсутствие минимального размера
- **Описание:** На мобильных устройствах карточка (`<Card>`) занимает всю ширину (`w-full`), но не имеет `min-w` или `min-h`. Это может привести к тому, что на очень узких экранах карточки станут слишком маленькими, а их содержимое — нечитаемым.
- **Рекомендация:** В `src/features/tracks/ui/TrackCard.tsx` добавить `sm:min-w-[320px]`, чтобы на планшетах и более крупных устройствах карточка не была слишком узкой. Для мобильных устройств (`w-full`) следует убедиться, что внутренние отступы и размеры шрифтов достаточны.

### 2. MinimalDetailPanel (`src/features/tracks/ui/MinimalDetailPanel.tsx`)

#### Проблема P0: Потенциальное переполнение вьюпорта
- **Описание:** Высота панели определяется ее содержимым (`h-full`). На небольших экранах, если все аккордеоны открыты, панель может стать выше высоты экрана, и пользователь не сможет получить доступ к нижним элементам управления.
- **Рекомендация:** Основной контейнер контента должен использовать `ScrollArea`. В коде это уже реализовано, но нужно убедиться, что `<ScrollArea className="flex-1">` работает корректно и не позволяет панели выходить за пределы экрана.

#### Проблема P1: Доступность кнопок действий
- **Описание:** Кнопки "Сохранить" и "Удалить" находятся внизу панели. Если контент длинный, до них придется долго скроллить.
- **Рекомендация:** Рассмотреть возможность сделать футер с основными действиями "липким" (sticky) внизу панели, чтобы он всегда был виден.

### 3. GlobalAudioPlayer (`src/components/player/MiniPlayer.tsx`)

#### Проблема P0: Конфликты `z-index`
- **Описание:** `MiniPlayer` имеет `z-index`, установленный через переменную `--z-mini-player`. Необходимо убедиться, что эта переменная имеет значение, которое помещает плеер выше основного контента, но ниже модальных окон и диалогов (`--z-modal`, `--z-dialog`).
- **Файл:** `src/styles/design-tokens.css`
- **Рекомендация:** Проверить иерархию z-index в `design-tokens.css`. `--z-mini-player` должен быть меньше, чем `--z-modal`.

#### Проблема P1: Отступы для безопасных зон (Safe Area)
- **Описание:** В `MiniPlayer.tsx` используется класс `safe-area-bottom`, но неясно, как он реализован. Необходимо убедиться, что он использует `env(safe-area-inset-bottom)`.
- **Рекомендация:** Проверить реализацию `safe-area-bottom` в CSS и применить аналогичные отступы (`safe-area-inset-left`, `safe-area-inset-right`) к основным контейнерам макета.

#### Проблема P2: Сжатие элементов на узких экранах
- **Описание:** На экранах < 375px (например, iPhone SE) группа кнопок управления воспроизведением может выглядеть слишком сжатой.
- **Рекомендация:** Уменьшить горизонтальные отступы (`gap`) между кнопками на самых маленьких экранах с помощью медиа-запросов или адаптивных классов Tailwind CSS. В коде уже есть попытки это сделать (`gap-1 sm:gap-2`), но стоит проверить результат.

