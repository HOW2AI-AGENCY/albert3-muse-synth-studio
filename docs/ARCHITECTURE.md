# üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞: Albert3 Muse Synth Studio

**–í–µ—Ä—Å–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞:** 3.0.1 (–ê—É–¥–∏—Ç –æ—Ç 03.11.2025, –æ–±–Ω–æ–≤–ª–µ–Ω–æ)
**–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç—É–∞–ª—å–Ω–æ

---

## 1. –û–±–∑–æ—Ä —Å–∏—Å—Ç–µ–º—ã

Albert3 Muse Synth Studio ‚Äî —ç—Ç–æ **Single Page Application (SPA)**, –ø–æ—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –Ω–∞ **React**, –∫–æ—Ç–æ—Ä–æ–µ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤—É–µ—Ç —Å –±—ç–∫–µ–Ω–¥–æ–º –Ω–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–µ **Supabase (Backend-as-a-Service)**.

–≠—Ç–∞ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–¥–µ–ª–∏—Ç—å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (–≤—Å—è –ª–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º) –æ—Ç –±—ç–∫–µ–Ω–¥–∞ (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å AI-—Å–µ—Ä–≤–∏—Å–∞–º–∏).

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–∞—è —Å—Ö–µ–º–∞

```mermaid
graph TB
    subgraph "Frontend Layer (React + Vite)"
        A[UI Components (shadcn/ui)]
        B[State Management (React Query + Zustand)]
        C[Routing (React Router)]
    end

    subgraph "Backend Layer (Supabase)"
        F[Edge Functions (Deno)]
        G[Database (PostgreSQL + RLS)]
        H[Authentication (JWT)]
        I[Storage]
    end

    subgraph "External AI Providers"
        K[Suno AI API]
        L[Replicate.com API]
    end

    A & C --> B
    B --> F
    F --> K
    F --> L
    F --> G
    F --> I
    G --> H

    style A fill:#61DAFB,stroke:#333,stroke-width:2px
    style F fill:#3ECF8E,stroke:#333,stroke-width:2px
    style K fill:#FF6F61,stroke:#333,stroke-width:2px
    style L fill:#9B59B6,stroke:#333,stroke-width:2px
```

## 2. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

| –°–ª–æ–π | –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
| :--- | :--- | :--- |
| **Frontend** | React, TypeScript, Vite | UI, —Ç–∏–ø–∏–∑–∞—Ü–∏—è –∏ —Å–±–æ—Ä–∫–∞ |
| **UI** | Tailwind CSS, shadcn/ui, Radix UI | –°—Ç–∏–ª–∏–∑–∞—Ü–∏—è –∏ UI-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã |
| **–°–æ—Å—Ç–æ—è–Ω–∏–µ** | TanStack Query, Zustand | –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω—ã–º –∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º |
| **–ë—ç–∫–µ–Ω–¥** | Supabase | BaaS (–±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö, –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è, —Ö—Ä–∞–Ω–∏–ª–∏—â–µ) |
| **Edge Functions**| Deno | –°—Ä–µ–¥–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –¥–ª—è —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –ª–æ–≥–∏–∫–∏ |
| **AI-—Å–µ—Ä–≤–∏—Å—ã** | Suno, Replicate | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –º—É–∑—ã–∫–∏ –∏ –∞–Ω–∞–ª–∏–∑ –∞—É–¥–∏–æ |

## 3. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –§—Ä–æ–Ω—Ç–µ–Ω–¥–∞

–ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `src/` –∏ –∏–º–µ–µ—Ç –º–æ–¥—É–ª—å–Ω—É—é —Å—Ç—Ä—É–∫—Ç—É—Ä—É.

-   **`pages/`**: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã-—Å—Ç—Ä–∞–Ω–∏—Ü—ã, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ —Ä–æ—É—Ç–∞–º –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏.
-   **`components/`**: –ü–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ React-–∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã.
-   **`hooks/`**: –ö–∞—Å—Ç–æ–º–Ω—ã–µ —Ö—É–∫–∏, –∏–Ω–∫–∞–ø—Å—É–ª–∏—Ä—É—é—â–∏–µ –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É.
-   **`services/`**: –ú–æ–¥—É–ª–∏ –¥–ª—è –∏–Ω–∫–∞–ø—Å—É–ª—è—Ü–∏–∏ –≤—ã–∑–æ–≤–æ–≤ API.
-   **`stores/`**: –•—Ä–∞–Ω–∏–ª–∏—â–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è Zustand.

## 4. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ë—ç–∫–µ–Ω–¥–∞ (Supabase Edge Functions)

–í—Å—è —Å–µ—Ä–≤–µ—Ä–Ω–∞—è –ª–æ–≥–∏–∫–∞ –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å –≤–Ω–µ—à–Ω–∏–º–∏ API —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –≤ –≤–∏–¥–µ **Edge-—Ñ—É–Ω–∫—Ü–∏–π** –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ `supabase/functions/`.

-   **`_shared/`**: –û–±—â–∏–π –∫–æ–¥, –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–π –º–µ–∂–¥—É —Ñ—É–Ω–∫—Ü–∏—è–º–∏.
-   **`generate-suno/`**: –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –º—É–∑—ã–∫–∏ —á–µ—Ä–µ–∑ Suno API.
-   **`suno-callback/`**: –§—É–Ω–∫—Ü–∏—è-–≤–µ–±—Ö—É–∫ –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –≥–æ—Ç–æ–≤—ã—Ö —Ç—Ä–µ–∫–æ–≤ –æ—Ç Suno.
-   **`analyze-audio/`**: –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –∞—É–¥–∏–æ —á–µ—Ä–µ–∑ Replicate.com (–≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –º–∏–≥—Ä–∞—Ü–∏–∏).

## 5. –ü–æ—Ç–æ–∫–∏ –¥–∞–Ω–Ω—ã—Ö (Data Flows)

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç—Ä–µ–∫–∞ (Suno)

–≠—Ç–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π callback –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.

```mermaid
sequenceDiagram
    participant User as –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (UI)
    participant Frontend as –§—Ä–æ–Ω—Ç–µ–Ω–¥ (React)
    participant EdgeFunc as Edge-—Ñ—É–Ω–∫—Ü–∏—è (generate-suno)
    participant SunoAPI as Suno API
    participant Callback as Edge-—Ñ—É–Ω–∫—Ü–∏—è (suno-callback)
    participant DB as Supabase DB

    User->>Frontend: –ó–∞–ø–æ–ª–Ω—è–µ—Ç —Ñ–æ—Ä–º—É, –Ω–∞–∂–∏–º–∞–µ—Ç "–°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å"
    Frontend->>EdgeFunc: –í—ã–∑—ã–≤–∞–µ—Ç /generate-suno —Å JWT –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
    EdgeFunc->>SunoAPI: –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –Ω–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏—é
    SunoAPI-->>EdgeFunc: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç taskId

    Note over SunoAPI, DB: ...–ø—Ä–æ—Ö–æ–¥–∏—Ç –≤—Ä–µ–º—è...

    SunoAPI->>Callback: –í—ã–∑—ã–≤–∞–µ—Ç /suno-callback —Å –≥–æ—Ç–æ–≤—ã–º–∏ —Ç—Ä–µ–∫–∞–º–∏
    Callback->>DB: –°–æ—Ö—Ä–∞–Ω—è–µ—Ç —Ç—Ä–µ–∫ –∏ –µ–≥–æ –≤–µ—Ä—Å–∏–∏ –≤ `tracks` –∏ `track_versions`
```

### –ê–Ω–∞–ª–∏–∑ –∞—É–¥–∏–æ (Replicate) - –¶–µ–ª–µ–≤–∞—è —Å—Ö–µ–º–∞

–≠—Ç–æ –±—É–¥–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Å –≤–µ–±—Ö—É–∫–æ–º –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞.

```mermaid
sequenceDiagram
    participant User as –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (UI)
    participant Frontend as –§—Ä–æ–Ω—Ç–µ–Ω–¥ (React)
    participant EdgeFunc as Edge-—Ñ—É–Ω–∫—Ü–∏—è (analyze-audio)
    participant ReplicateAPI as Replicate API
    participant Callback as Edge-—Ñ—É–Ω–∫—Ü–∏—è (replicate-callback)
    participant DB as Supabase DB

    User->>Frontend: –ó–∞–≥—Ä—É–∂–∞–µ—Ç –∞—É–¥–∏–æ—Ñ–∞–π–ª
    Frontend->>EdgeFunc: –í—ã–∑—ã–≤–∞–µ—Ç /analyze-audio —Å URL –∞—É–¥–∏–æ –∏ JWT
    EdgeFunc->>ReplicateAPI: –ó–∞–ø—É—Å–∫–∞–µ—Ç –∑–∞–¥–∞—á—É –∞–Ω–∞–ª–∏–∑–∞, –ø–µ—Ä–µ–¥–∞–≤–∞—è webhook URL
    ReplicateAPI-->>EdgeFunc: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç ID –∑–∞–¥–∞—á–∏

    Note over ReplicateAPI, DB: ...–ø—Ä–æ—Ö–æ–¥–∏—Ç –≤—Ä–µ–º—è...

    ReplicateAPI->>Callback: –í—ã–∑—ã–≤–∞–µ—Ç webhook —Å —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –∞–Ω–∞–ª–∏–∑–∞
    Callback->>DB: –û–±–Ω–æ–≤–ª—è–µ—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —Ç—Ä–µ–∫–∞
```

## 6. –°–∏—Å—Ç–µ–º–∞ –≤–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏—è —Ç—Ä–µ–∫–æ–≤

-   **–¢–∞–±–ª–∏—Ü–∞ `tracks`**: –•—Ä–∞–Ω–∏—Ç –æ—Å–Ω–æ–≤–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç—Ä–µ–∫–µ.
-   **–¢–∞–±–ª–∏—Ü–∞ `track_versions`**: –•—Ä–∞–Ω–∏—Ç –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ –≤–µ—Ä—Å–∏–∏ (–≤–∞—Ä–∏–∞–Ω—Ç—ã) —Ç—Ä–µ–∫–∞.
-   **–ü—Ä–æ—Ü–µ—Å—Å —Å–æ–∑–¥–∞–Ω–∏—è**: `suno-callback` –ø–æ–ª—É—á–∞–µ—Ç –æ—Ç Suno API –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ —Ç—Ä–µ–∫–∞ –∏ —Å–æ–∑–¥–∞—ë—Ç –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –∑–∞–ø–∏—Å—å –≤ `track_versions`.
-   **–ü—Ä–æ—Ü–µ—Å—Å –ø–æ–ª—É—á–µ–Ω–∏—è**: –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ö—É–∫ `useTrackVersions` –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –≤–µ—Ä—Å–∏–π.
-   **–ü—Ä–æ–±–ª–µ–º–∞**: **–û–±–Ω–∞—Ä—É–∂–µ–Ω –±–∞–≥**, –∏–∑-–∑–∞ –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –æ–¥–Ω–∞ –≤–µ—Ä—Å–∏—è. –¢—Ä–µ–±—É–µ—Ç –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è.
