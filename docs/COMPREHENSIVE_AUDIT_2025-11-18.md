# Комплексный аудит и план редизайна от 2025-11-18

## 1. Введение

Этот документ представляет результаты комплексного аудита репозитория Albert3 Muse Synth Studio и предлагает план действий по редизайну пользовательского интерфейса на основе предоставленных макетов.

## 2. Результаты аудита кодовой базы

### 2.1. Архитектура и структура компонентов

- **Архитектура:** Проект использует современную архитектуру на базе React, TypeScript, Vite и Supabase. Присутствует четкое разделение на компоненты, хуки, сервисы и утилиты.
- **Frontend:** Используется React с функциональными компонентами и хуками. Состояние управляется через Zustand и React Query. Роутинг реализован с помощью React Router.
- **Backend:** Supabase используется для базы данных, аутентификации и Edge Functions (Deno). Функции хорошо структурированы, но есть дублирование логики (например, CORS, auth).
- **Мобильная адаптация:**
    - Используется `useBreakpoints` для определения типа устройства.
    - Применяются утилиты Tailwind CSS (`sm:`, `md:`, `lg:`) для адаптивной верстки.
    - Существуют специализированные мобильные компоненты (например, `BottomTabBar`, `MobileNavigation`).
    - **Проблема:** Адаптивность реализована неконсистентно. Некоторые страницы и компоненты плохо выглядят на мобильных устройствах. Часто используется скрытие/отображение блоков (`hidden md:block`), что не всегда оптимально.

### 2.2. Качество кода и лучшие практики

- **TypeScript:** TypeScript используется повсеместно, однако часто встречается тип `any`, что снижает безопасность типов.
- **Стилизация:** Используется Tailwind CSS. Есть общие файлы стилей, но много стилей инлайново в компонентах, что затрудняет поддержку.
- **Производительность:**
    - Используется `React.lazy` для разделения кода.
    - Есть потенциал для оптимизации. Например, некоторые тяжелые компоненты или библиотеки можно загружать динамически.
    - **Проблема:** Сборка генерирует большие чанки, что может влиять на время начальной загрузки.

### 2.3. CI/CD и тестирование

- **CI/CD:** Настроены workflow для линтинга, сборки и тестирования (`ci.yml`, `playwright.yml`).
- **Тестирование:**
    - Присутствуют unit-тесты (Vitest) и E2E-тесты (Playwright).
    - **Проблема:** Тестовое покрытие низкое. Многие тесты нестабильны или отключены. Моки для Supabase требуют постоянного обновления.

## 3. Анализ предоставленных макетов

На основе анализа изображений (`SPLASH SCREEN.png`, `WELCOME_PAGE.png`, `HOME_PAGE.png`, `PLAYER_PANEL.png`) был определен новый дизайн-вектор.

- **Тема:** Современная, темная, с акцентным фиолетовым градиентом.
- **Типографика:** Чистый, читаемый шрифт без засечек.
- **Иконографика:** Минималистичные, контурные иконки.
- **Компоненты:**
    - **Кнопки:** Скругленные, с легкой тенью.
    - **Поиск:** Заметная строка поиска с иконкой.
    - **Навигация:** Нижняя панель навигации (Bottom Tab Bar) с четкими иконками и подписями.
    - **Плеер:** Интегрирован в навигационную панель в виде мини-плеера.
    - **Карточки:** Скругленные карточки для альбомов и артистов.

## 4. План редизайна и реализации

### Шаг 1: Подготовка и настройка дизайн-системы

1.  **Обновить Tailwind CSS Config:**
    - Добавить новые цвета (градиенты, основной фиолетовый, цвета текста).
    - Настроить шрифты в соответствии с макетом.
    - Добавить новые размеры и отступы, если необходимо.
2.  **Создать/обновить базовые UI-компоненты:**
    - `Button`: Обновить стили кнопок.
    - `Input`: Обновить стили полей ввода (особенно для поиска).
    - `Card`: Создать или обновить компонент карточки.

### Шаг 2: Реализация экранов

1.  **Splash Screen (Экран загрузки):**
    - Создать новый компонент `SplashScreen`.
    - Реализовать верстку согласно макету (`SPLASH SCREEN.png`).
    - Интегрировать его в логику инициализации приложения.
2.  **Welcome Page (Страница приветствия):**
    - Модифицировать существующую `Landing.tsx` или создать новую страницу.
    - Реализовать верстку согласно макету (`WELCOME_PAGE.png`).
3.  **Home Page (Главный экран):**
    - Переработать `Dashboard.tsx` или `Library.tsx`.
    - Реализовать новую структуру с разделами "Новые альбомы", "Популярные артисты", "Недавно прослушанные".
    - Использовать горизонтальные карусели для списков.
4.  **Нижняя навигация и плеер:**
    - Модифицировать `BottomTabBar.tsx`.
    - Интегрировать в него новый дизайн мини-плеера согласно макету (`PLAYER_PANEL.png`).
    - Обновить иконки и стили.

### Шаг 3: Рефакторинг и тестирование

1.  **Рефакторинг:** Провести рефакторинг затронутых компонентов для улучшения читаемости и производительности.
2.  **Типизация:** Устранить использование `any` в измененных файлах.
3.  **Тестирование:**
    - Обновить существующие unit-тесты для измененных компонентов.
    - Написать новые Playwright E2E-тесты для проверки визуального соответствия и функциональности новых экранов.

## 5. Приоритетные направления

1.  **UI Kit:** Начать с обновления базовых компонентов (кнопки, инпуты).
2.  **Навигация:** Реализовать новую нижнюю панель навигации, так как это ключевой элемент мобильного интерфейса.
3.  **Главный экран:** После навигации сфокусироваться на главном экране как на наиболее контентно-насыщенном.
4.  **Остальные экраны:** Постепенно переводить остальные экраны на новую дизайн-систему.
