# Аудит интерфейса Albert3 Muse Synth Studio

Документ фиксирует текущие проблемные зоны UI и предлагает пошаговый план перевода рабочего пространства в компактный, минималистичный, но функциональный вид.

## 1. Базовые метрики и выводы

| Зона | Текущее состояние | Влияние | Целевое состояние |
| --- | --- | --- | --- |
| Горизонтальная сетка | Базовые контейнеры `max-w-7xl` + `px-8` | Контент визуально «плавает», отнимается до 128 px ширины на паддинги.【F:src/components/ui/ResponsiveLayout.tsx†L26-L104】 | Унифицировать до `max-w-screen-2xl`, `px-4/px-6`, привести все страницы к одной сетке |
| Вертикальные отступы | `space-y-6`, `py-8` во вложенных карточках | Высокие блоки, слайсы не помещаются «над сгибом» на 1440 px | Настроить пресеты `compact`: 12–16 px для секций, 8–12 px внутри карточек |
| Размеры контролов | Токены `--control-height-lg: 48px`, `--radius-lg: 12px` | Кнопки/inputs занимают до 25 % высоты формы генерации.【F:src/styles/design-tokens.css†L72-L156】 | Снизить `--control-height-md` до 36 px, `--radius-md` до 6 px, оставить крупные размеры только для hero-зон |
| Сайдбар | Фиксированные 256 px (развернутый) / 64 px (свернутый) | Отнимает 22–25 % рабочей области, дублирует подписи, не умещается на 1024 px без скролла.【F:src/components/workspace/MinimalSidebar.tsx†L53-L129】 | Оптимизировать до 200 px / 56 px, добавить режим «иконки + тултип» |
| Контентные панели | Карточки `Card` с `p-6`, табы `h-12` | Высота генератора >1200 px, пользователь теряет контекст.【F:src/components/MusicGenerator.tsx†L1-L200】 | Ввести модульную сетку `grid-cols-[minmax(280px,360px)_1fr]` + компактные табы (`h-10`). |

**Ключевые выводы:**

1. Плотность элементов не реагирует на изменение брейкпоинтов, поэтому интерфейс одинаково «воздушный» на 1280 px и 1920 px.
2. В большинстве компонентов продублированы контейнеры с большими паддингами, что суммарно съедает до трети экрана.
3. Управляющие элементы не имеют компактной версии, поэтому каждая форма растягивается на два и более экранов.

## 2. Детальный аудит по зонам

### 2.1 Дизайн-токены и утилиты

- Токены пространства (`--space-6: 24px`, `--space-8: 32px`) используются как дефолт даже для второстепенных секций.【F:src/styles/design-tokens.css†L72-L156】
- Компонент `ResponsiveLayout` применяет пресеты `gap-6`/`gap-8`, не предлагая компактного режима, из-за чего любые вложенные сетки наследуют избыточные отступы.【F:src/components/ui/ResponsiveLayout.tsx†L26-L104】
- Нет системного переключателя плотности. В отдельных местах разработчики уменьшают размеры вручную (`className="px-4 py-3"`), что приводит к хаосу в визуальном ритме.

**Рекомендация:** ввести токены `--density: comfortable | compact` и рассчитать для каждого состояния таблицу размеров (control, radius, space). Подключить их через `data-density` на `body`, чтобы переключение работало глобально.

### 2.2 Сайдбар и глобальная навигация

- Элемент `MinimalSidebar` рендерит элементы списка высотой 48 px (`h-12`) с боковыми паддингами `px-4` и иконками 24 px. Суммарно один пункт занимает 72 px по высоте, что вмещает не более пяти пунктов на стандартном ноутбуке.【F:src/components/workspace/MinimalSidebar.tsx†L53-L129】
- На ширинах 1024–1280 px раскладка `grid` выделяет 256 px под навигацию и 32 px отступа, оставляя рабочей области около 720 px, чего недостаточно для форм и таблиц.

**Рекомендация:**

1. Сократить ширину развернутого состояния до 200 px, уменьшить паддинги пунктов до `px-2`, высоту до 40 px (`h-10`).
2. В свернутом режиме отображать только иконки 24 px + тултип при ховере; ширину сократить до 56 px.
3. Добавить пользовательский переключатель «Закрепить компактный режим» для сценариев с внешним монитором.

### 2.3 Шапка, заголовки и отступы страниц

- Заголовки страниц (`WorkspaceHeader`) используют `px-8` и `py-6`, в то время как контент внутри использует `px-6`, что ломает единую колонку.【F:src/components/workspace/WorkspaceLayout.tsx†L1-L100】
- Breadcrumb и кнопки действия располагаются на разных вертикальных линиях, что визуально разбивает шапку.

**Рекомендация:** построить единый компонент `WorkspaceTopBar` высотой 56 px с сеткой `grid-cols-[auto_1fr_auto]`, отступами `px-4` и перенести в него хлебные крошки, заголовок, CTA.

### 2.4 Формы генерации

- Блок `MusicGenerator` рендерит вложенные карточки `Card` с `p-6`, `space-y-6`, `Tabs` с `h-12`. При ширине 1440 px общая высота формы превышает 1200 px, кнопки запуска оказываются вне первого экрана.【F:src/components/MusicGenerator.tsx†L1-L200】
- Все поля расположены в одной колонке даже на `xl`, хотя по содержанию их можно разделить на «контекст промпта» и «параметры».

**Рекомендация:**

1. Перевести макет на двухколоночную сетку `grid-cols-[minmax(280px,360px)_1fr]` начиная с `lg`.
2. Минимизировать `space-y` до 16 px, заменить `Card` на `Section` с `px-4 py-4`.
3. В табах настроек использовать компактный стиль (`h-10`, `px-3`) и выровнять содержимое по базовой сетке.
4. Закрепить кнопку запуска генерации (`position: sticky`) в нижней части левой колонки, чтобы она оставалась на экране при прокрутке.

### 2.5 Списки треков и карточки

- `TracksList` применяет `gap-6` и карточки с паддингом `p-6`, что визуально утяжеляет выдачу, особенно в режиме сетки.【F:src/components/TracksList.tsx†L112-L200】
- `TrackCard` имеет высоту 96–104 px при контенте из двух строк, изображение занимает 64 px, а описание «плавает» в свободном пространстве.【F:src/features/tracks/components/TrackCard.tsx†L1-L120】
- Панель детализации (`DetailPanel`) раскрывается третьей колонкой шириной 420 px, что ломает верстку при ширине окна <1440 px.

**Рекомендация:**

1. Добавить модификатор `compact` для карточек: `p-4`, высота 64 px, миниатюра 48 px.
2. Пересчитать сетку: `gap-4` на `md`, `gap-5` на `xl`, обеспечить `md:grid-cols-2`, `lg:grid-cols-3`, `xl:grid-cols-4`.
3. Реализовать режим «overlay detail» (детальная панель поверх контента) на ширинах <1440 px.

### 2.6 Адаптивность

- Брейкпоинты Tailwind используются без адаптации плотности, поэтому при уменьшении экрана элементы просто сжимаются без изменения размеров контролов.【F:src/styles/design-tokens.css†L160-L199】
- На планшетах (768–1024 px) сайдбар убирается, но формы сохраняют `p-6`, в результате ключевые кнопки оказываются ниже первого экрана.

**Рекомендация:** внедрить «масштаб плотности» по брейкпоинтам:

| Breakpoint | Density | Пространство | Контролы |
| --- | --- | --- | --- |
| `<768` | compact | `space-2/3 = 8/12px` | `height-9 (36px)` |
| `768–1279` | compact | `space-3/4 = 12/16px` | `height-10 (40px)` |
| `≥1280` | comfortable | `space-4/6 = 16/24px` | `height-11 (44px)` |

Настроить переключение токенов через `data-density` и медиазапросы.

## 3. Пошаговый план оптимизации

### Фаза A. Токены и инфраструктура (1 спринт)

1. **Определить таблицу плотностей** и обновить `design-tokens.css` для поддержки переменных `--space-compact-*`, `--control-height-*`.【F:src/styles/design-tokens.css†L72-L199】
2. **Обновить `ResponsiveLayout`**: добавить проп `density="compact"` и связать его с токенами, снизить дефолтные `gap` до 16 px и 20 px.
3. **Создать утилиты Tailwind** (`.density-compact`, `.density-comfortable`) для быстрого применения в компонентах.

### Фаза B. Каркас навигации (1 спринт)

1. Рефактор `MinimalSidebar`: новые размеры, режим тултипов, управление состоянием через `useMediaQuery` для автокомпакта.【F:src/components/workspace/MinimalSidebar.tsx†L53-L129】
2. Собрать `WorkspaceTopBar` с унифицированными отступами и базовой сеткой, заменить текущие хедеры во всех страницах.【F:src/components/workspace/WorkspaceLayout.tsx†L1-L100】

### Фаза C. Основные сценарии (2 спринта)

1. **Music Generator:** внедрить новую сетку, шаговую форму, закрепить CTA, пересчитать табы и отступы.【F:src/components/MusicGenerator.tsx†L1-L200】
2. **Tracks List & Detail:** добавить компактные карточки, обновить гриды, реализовать overlay-панель детальных сведений.【F:src/components/TracksList.tsx†L112-L200】【F:src/features/tracks/components/TrackCard.tsx†L1-L120】
3. **Dashboard/Reports:** применить новую сетку и плотность, проверить совместимость с графиками и таблицами.

### Фаза D. Адаптив и QA (1 спринт)

1. Настроить сценарии для 768 px, 1024 px, 1280 px, 1440 px в сторибуке/визуальных тестах.
2. Пересмотреть focus-states и hit-area после уменьшения контролов.
3. Создать чек-лист QA: плотность, отсутствие горизонтального скролла, минимум два CTA «над сгибом».

## 4. Бэклог задач (по приоритету)

1. Определить и задокументировать плотности (дизайн + фронт) — **P0**.
2. Рефактор сайдбара и топ-бара — **P0**.
3. Компактная версия генератора — **P1**.
4. Компактная версия списка треков и детализации — **P1**.
5. Настроить автоматические визуальные регрессии — **P2**.
6. Обновить гайдинги и примеры компонентов — **P2**.

Реализация предложенных шагов вернет фокус на контент, ускорит работу с основными сценариями и обеспечит единообразие интерфейса на ключевых брейкпоинтах.
